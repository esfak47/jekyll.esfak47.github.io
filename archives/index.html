<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives | null</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title">
<meta property="og:url" content="http://yoursite.com/archives/">
<meta property="og:site_name">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="null" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">null</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-why-we-droped-our-dream" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/why-we-droped-our-dream/" class="article-date">
  <time datetime="2014-07-16T10:15:19.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/feeling/">feeling</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/why-we-droped-our-dream/">我们为何渐渐放弃了自己的梦想</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>梦想到底是什么？对我来说，我的梦想就是我最渴望达成的目标。比起其他目标来说，梦想是我最最想达成的目标，为了这个目标，我愿意做一切努力。但同时，很梦想一直仅仅是梦想而已，未能成为实现。所以现在的问题就是，你对自己的梦想有多渴望？你的梦想真的是你的梦想吗？如果梦想成真你会获得莫大的幸福，那为什么你会不要这样的幸福呢？</em></p>
<h3 id="异想天开">异想天开</h3>
<p>　　小时候我们的梦想是五彩缤纷的，我要当消防员、NBA球员、电影明星……感觉一切皆有可能。那时我们想：“我们有可能实现这些梦想。”但随着年龄的增长，很多观念开始限制我们。这些条条框框让我们离我们的梦想越来越远。进入青春期后，你发现有的女孩更漂亮、苗条、聪明；有的同学更魁梧，投篮易如反掌；你想考入哈佛，你为此做好一切准备和努力，可总有人比你成绩更好。</p>
<p>　　然后95%的人就认命了，不断告诉自己：“唉，太糟了”，“我没那能力”，“我没那条件”，“我可以做一切努力但有人比我做的更好”。</p>
<p>　　原来可以站在上面仰望星空的房顶现在却成了我们偷懒、逃避的庇护所。不把所有的鸡蛋都放在一个篮子里按说是合理的，但当事情不像设想的进行的那么顺利时就认为这不是最好的选择也是很不对的。那么究竟是什么阻止了我们达成目标，让我们不能实现梦想？</p>
<h3 id="做好计划">做好计划</h3>
<p>　　人们放弃梦想的一个重要原因就是没有做好计划。总是想让长远目标立马实现，却没有实现目标的具体计划。我们总是想要快速的成功，而忽略了成功是一个过程，需要时间。有梦想有野心是好的，但自己要分清楚哪些是现在可能实现的，哪些是要等到将来才可行。成功者知道要分期设置目标，一步步实现。这样你就会一步步接近自己的梦想，而且从一个个阶段性的胜利中尝到成功的滋味。这小小成功很重要，这让你对自己实现最终的梦想更有信心。</p>
<h3 id="持之以恒">持之以恒</h3>
<p>　　另一个原因就是持之以恒了。当事情进展的不像计划的那样顺利时，放弃这个转做其他的好像更有吸引力。我们在想：“这个确实是我想要的，但这太难了，而且要花的时间太长了”或者是：“我好像实现不了目标了，我再努力再坚持有什么意义。”坚持下去的意义就在于——这样你的梦想还是活的，你还有可能收获最终的幸福！你还有机会过上自己想要的生活。问题是你有多想实现这个梦想。</p>
<h3 id="抛开束缚">抛开束缚</h3>
<p>　　我们放弃梦想的另一个重要原因是我们加在自己身上的种种束缚。这些束缚总会跳出来，告诉我们不够好，我们搞不定，让我们很没有安全感，认为自己糟透了。在低谷时，我们总是缺乏自信，不能做到这样鼓励自己：我很棒，我一定能抵达终点。我们认识不到自己的能力，开始自我怀疑了。<br>　　除了自我束缚，也有来自外部的束缚。外部环境也会让你没有安全感。“你该现实点”，这可能是人们最常爱的建议，虽然这建议没有什么实际作用。什么样才算是现实点？如何衡量？你认为比尔·盖茨现实吗？奥普拉呢？甘地呢？关于“现实”这个问题，Will Smith（美国电影明星）说的很好：“‘现实’之路就是平庸之路。”你愿意一直平庸下去吗？因为没有全身心投入而平庸？在追逐梦想的过程中肯定会时不时的害怕、沮丧，但如果你想实现你的梦想，这些都是少不了的。</p>
<h3 id="积极乐观">积极乐观</h3>
<p>　　如果你让加在自己身上的束缚那么重，那么最该责怪的人是你自己。你让这些束缚加在自己身上，而不是将它们击退。你有选择不让它们影响自己的权力，因为你的身心你做主。一旦你认识到成功就掌握在自己的手中，只要以更积极的方式思考，你就可以做到。想象一下你达成目标时的激动场面，想象一下你会多么幸福。这样设想一会儿，看看会给你带来什么影响。如果这样的愿景让你非常幸福，你该问问自己你还可以为之做出哪些改变。</p>
<p>　　总之，你放弃自己梦想的代价就是你不能获得最大的幸福感，除非那已经不是你的梦想了。那些没能坚持下来的人在之后的人生中总会禁不住想：若果…就会…。如果你的梦想对你非常重要，那就全力以赴吧，即使失败了也没有什么可以后悔的，可以对自己说：我真的尽力了。抛开一切束缚，追逐最大的快乐吧。在你有限的人生中，不要再舍本逐末。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/why-we-droped-our-dream/" data-id="1xkrrirxgmwnlmob" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-canvas" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/canvas/" class="article-date">
  <time datetime="2014-07-16T10:15:19.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/canvas/">Canvas API</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="概述">概述</h2>
<p>Canvas用于在网页展示图像，并且可以定制内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。</p>
<p>Canvas API用于网页实时生成图像，JavaScript通过API来操作图像内容。这样做的优点是：减少HTTP请求数，减少下载的数据，加快网页载入时间，可以对图像进行实时处理。</p>
<p>使用前，首先需要新建一个canvas网页元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="tag">&lt;<span class="title">canvas</span> <span class="attribute">id</span>=<span class="value">"myCanvas"</span> <span class="attribute">width</span>=<span class="value">"400"</span> <span class="attribute">height</span>=<span class="value">"200"</span>&gt;</span></div><div class="line">	您的浏览器不支持canvas！</div><div class="line"><span class="tag">&lt;/<span class="title">canvas</span>&gt;</span></div></pre></td></tr></table></figure>

<p>如果浏览器不支持这个API，则就会显示canvas标签中间的文字——“您的浏览器不支持canvas！”。</p>
<p>然后，使用JavaScript获取canvas的DOM对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> canvas = document.getElementById(<span class="string">'myCanvas'</span>);</div></pre></td></tr></table></figure>

<p>接着，检查浏览器是否支持Canvas API，方法是看有没有部署getContext方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">if</span> (canvas.getContext) {</div><div class="line">	<span class="comment">// some code here</span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>使用getContext(‘2d’)方法，初始化平面图像的上下文环境。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</div></pre></td></tr></table></figure>

<p>现在就在canvas中间生成平面图像了。</p>
<h2 id="绘图方法">绘图方法</h2>
<p>（1）填充颜色</p>
<p>设置填充颜色。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#000000"</span>; <span class="comment">// 设置填充色为黑色</span></div></pre></td></tr></table></figure>

<p>（2）绘制矩形</p>
<p>绘制实心矩形。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>

<p>绘制空心矩形。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.strokeRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>

<p>清除某个矩形区域的内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.clearRect(<span class="number">100</span>,<span class="number">50</span>,<span class="number">50</span>,<span class="number">50</span>);</div></pre></td></tr></table></figure>

<p>（3）绘制路径</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.beginPath(); <span class="comment">// 开始路径绘制</span></div><div class="line"></div><div class="line">ctx.moveTo(<span class="number">20</span>, <span class="number">20</span>); <span class="comment">// 设置路径起点</span></div><div class="line"></div><div class="line">ctx.lineTo(<span class="number">200</span>, <span class="number">20</span>); <span class="comment">// 绘制一条到200, 20的直线</span></div><div class="line"></div><div class="line">ctx.lineWidth = <span class="number">1.0</span>; <span class="comment">// 设置线宽</span></div><div class="line"></div><div class="line">ctx.strokeStyle = <span class="string">"#CC0000"</span>; <span class="comment">// 设置线的颜色</span></div><div class="line"></div><div class="line">ctx.stroke(); <span class="comment">// 进行线的着色，这时整条线才变得可见</span></div></pre></td></tr></table></figure>

<p>moveto和lineto方法可以多次使用。最后，还可以使用closePath方法，自动绘制一条当前点到起点的直线，形成一个封闭图形，省却使用以此lineto方法。</p>
<p>（4）绘制圆形和扇形</p>
<p>绘制扇形的方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);</div></pre></td></tr></table></figure>

<p>arc方法的x和y参数是圆心坐标，radius是半径，startAngle和endAngle则是扇形的起始角度和终止角度（以弧度表示），anticlockwise表示做图时应该逆时针画（true）还是顺时针画（false）。</p>
<p>绘制实心的圆形。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.beginPath(); </div><div class="line"></div><div class="line">ctx.arc(<span class="number">60</span>, <span class="number">60</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>, <span class="literal">true</span>); </div><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#000000"</span>; </div><div class="line"></div><div class="line">ctx.fill();</div></pre></td></tr></table></figure>

<p>绘制空心圆形。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.beginPath(); </div><div class="line"></div><div class="line">ctx.arc(<span class="number">60</span>, <span class="number">60</span>, <span class="number">50</span>, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span>, <span class="literal">true</span>); </div><div class="line"></div><div class="line">ctx.lineWidth = <span class="number">1.0</span>; </div><div class="line"></div><div class="line">ctx.strokeStyle = <span class="string">"#000"</span>; </div><div class="line"></div><div class="line">ctx.stroke();</div></pre></td></tr></table></figure>

<p>（5）绘制文本</p>
<p>fillText方法用于添加文本，strokeText方法用于添加空心字。使用之前，需设定字体、对齐方向、颜色等属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.font = <span class="string">"Bold 20px Arial"</span>; <span class="comment">// 设置字体</span></div><div class="line"></div><div class="line">ctx.textAlign = <span class="string">"left"</span>; <span class="comment">// 设置对齐方式</span></div><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#008600"</span>; <span class="comment">// 设置填充颜色</span></div><div class="line"></div><div class="line">ctx.fillText(<span class="string">"Hello!"</span>, <span class="number">10</span>, <span class="number">50</span>); <span class="comment">// 设置字体内容，以及在画布上的位置</span></div><div class="line"></div><div class="line">ctx.strokeText(<span class="string">'Hello!", 10, 100); // 绘制空心字</span></div></pre></td></tr></table></figure>

<p>fillText方法不支持文本断行，即所有文本出现在一行内。所以，如果你要生成多行文本，只有调用多次fillText方法。</p>
<h3 id="渐变">渐变</h3>
<p>设置渐变色。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> myGradient = ctx.createLinearGradient(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">160</span>); </div><div class="line"></div><div class="line">myGradient.addColorStop(<span class="number">0</span>, <span class="string">"#BABABA"</span>); </div><div class="line"></div><div class="line">myGradient.addColorStop(<span class="number">1</span>, <span class="string">"#636363"</span>);</div></pre></td></tr></table></figure>

<p>createLinearGradient方法的参数是(x1, y1, x2, y2)，其中x1和y1是起点坐标，x2和y2是终点坐标。通过不同的坐标值，可以生成从上至下、从左到右的渐变等等。</p>
<p>使用方法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.fillStyle = myGradient;</div><div class="line">ctx.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>

<h3 id="阴影">阴影</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.shadowOffsetX = <span class="number">10</span>; <span class="comment">// 设置水平位移</span></div><div class="line"></div><div class="line">ctx.shadowOffsetY = <span class="number">10</span>; <span class="comment">// 设置垂直位移</span></div><div class="line"></div><div class="line">ctx.shadowBlur = <span class="number">5</span>; <span class="comment">// 设置模糊度</span></div><div class="line"></div><div class="line">ctx.shadowColor = <span class="string">"rgba(0,0,0,0.5)"</span>; <span class="comment">// 设置阴影颜色</span></div><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#CC0000"</span>; </div><div class="line">ctx.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">200</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>

<h2 id="图像处理方法">图像处理方法</h2>
<h3 id="插入图像">插入图像</h3>
<p>canvas允许将图像文件插入画布，做法是读取图片后，使用drawImage方法在画布内进行重绘。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line"></div><div class="line">img.src = <span class="string">"image.png"</span>;</div><div class="line"></div><div class="line">ctx.drawImage(img, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 设置对应的图像对象，以及它在画布上的位置</span></div></pre></td></tr></table></figure>

<p>由于图像的载入需要时间，drawImage方法只能在图像完全载入后才能调用，因此上面的代码需要改写。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> image = <span class="keyword">new</span> Image(); </div><div class="line"></div><div class="line">image.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span> </div><div class="line"></div><div class="line">	<span class="keyword">if</span> (image.width != canvas.width)</div><div class="line">        canvas.width = image.width;</div><div class="line">    <span class="keyword">if</span> (image.height != canvas.height)</div><div class="line">        canvas.height = image.height;</div><div class="line"></div><div class="line">	ctx.clearRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line">    ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">} </div><div class="line"></div><div class="line">image.src = <span class="string">"image.png"</span>;</div></pre></td></tr></table></figure>

<p>drawImage()方法接受三个参数，第一个参数是图像文件的DOM元素（即img标签），第二个和第三个参数是图像左上角在Canvas元素中的坐标，上例中的（0, 0）就表示将图像左上角放置在Canvas元素的左上角。</p>
<h3 id="读取Canvas的内容">读取Canvas的内容</h3>
<p>getImageData方法可以用来读取Canvas的内容，返回一个对象，包含了每个像素的信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div></pre></td></tr></table></figure>

<p>imageData对象有一个data属性，它的值是一个一维数组。该数组的值，依次是每个像素的红、绿、蓝、alpha通道值，因此该数组的长度等于 图像的像素宽度 x 图像的像素高度 x 4，每个值的范围是0–255。这个数组不仅可读，而且可写，因此通过操作这个数组的值，就可以达到操作图像的目的。修改这个数组以后，使用putImageData方法将数组内容重新回Canvas。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</div></pre></td></tr></table></figure>

<h3 id="像素处理">像素处理</h3>
<p>假定filter是一个处理像素的函数，那么整个对Canvas的处理流程，可以用下面的代码表示。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">if</span> (canvas.width &gt; <span class="number">0</span> && canvas.height &gt; <span class="number">0</span>) {</div><div class="line"></div><div class="line">	<span class="keyword">var</span> imageData = context.getImageData(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height);</div><div class="line"></div><div class="line">    filter(imageData);</div><div class="line"></div><div class="line">    context.putImageData(imageData, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">}</div></pre></td></tr></table></figure>

<p>以下是几种常见的处理方法。</p>
<p>（1）灰度效果</p>
<p>灰度图（grayscale）就是取红、绿、蓝三个像素值的算术平均值，这实际上将图像转成了黑白形式。假定d[i]是像素数组中一个象素的红色值，则d[i+1]为绿色值，d[i+2]为蓝色值，d[i+3]就是alpha通道值。转成灰度的算法，就是将红、绿、蓝三个值相加后除以3，再将结果写回数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">grayscale = <span class="function"><span class="keyword">function</span> <span class="params">(pixels)</span> {</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> d = pixels.data;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; d.length; i += <span class="number">4</span>) {</div><div class="line">      <span class="keyword">var</span> r = d[i];</div><div class="line">      <span class="keyword">var</span> g = d[i + <span class="number">1</span>];</div><div class="line">      <span class="keyword">var</span> b = d[i + <span class="number">2</span>];</div><div class="line">      d[i] = d[i + <span class="number">1</span>] = d[i + <span class="number">2</span>] = (r+g+b)/<span class="number">3</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">return</span> pixels;</div><div class="line"></div><div class="line">};</div></pre></td></tr></table></figure>

<p>（2）复古效果</p>
<p>复古效果（sepia）则是将红、绿、蓝三个像素，分别取这三个值的某种加权平均值，使得图像有一种古旧的效果。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">sepia = <span class="function"><span class="keyword">function</span> <span class="params">(pixels)</span> {</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> d = pixels.data;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; d.length; i += <span class="number">4</span>) {</div><div class="line">      <span class="keyword">var</span> r = d[i];</div><div class="line">      <span class="keyword">var</span> g = d[i + <span class="number">1</span>];</div><div class="line">      <span class="keyword">var</span> b = d[i + <span class="number">2</span>];</div><div class="line">      d[i]     = (r * <span class="number">0.393</span>)+(g * <span class="number">0.769</span>)+(b * <span class="number">0.189</span>); <span class="comment">// red</span></div><div class="line">      d[i + <span class="number">1</span>] = (r * <span class="number">0.349</span>)+(g * <span class="number">0.686</span>)+(b * <span class="number">0.168</span>); <span class="comment">// green</span></div><div class="line">      d[i + <span class="number">2</span>] = (r * <span class="number">0.272</span>)+(g * <span class="number">0.534</span>)+(b * <span class="number">0.131</span>); <span class="comment">// blue</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">return</span> pixels;</div><div class="line"></div><div class="line">};</div></pre></td></tr></table></figure>

<p>（3）红色蒙版效果</p>
<p>红色蒙版指的是，让图像呈现一种偏红的效果。算法是将红色通道设为红、绿、蓝三个值的平均值，而将绿色通道和蓝色通道都设为0。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">red = <span class="function"><span class="keyword">function</span> <span class="params">(pixels)</span> {</span></div><div class="line">	</div><div class="line">    <span class="keyword">var</span> d = pixels.data;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; d.length; i += <span class="number">4</span>) {</div><div class="line">      <span class="keyword">var</span> r = d[i];</div><div class="line">      <span class="keyword">var</span> g = d[i + <span class="number">1</span>];</div><div class="line">      <span class="keyword">var</span> b = d[i + <span class="number">2</span>];</div><div class="line">      d[i] = (r+g+b)/<span class="number">3</span>;        <span class="comment">// 红色通道取平均值</span></div><div class="line">      d[i + <span class="number">1</span>] = d[i + <span class="number">2</span>] = <span class="number">0</span>; <span class="comment">// 绿色通道和蓝色通道都设为0</span></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">return</span> pixels;</div><div class="line"></div><div class="line">};</div></pre></td></tr></table></figure>

<p>（4）亮度效果</p>
<p>亮度效果（brightness）是指让图像变得更亮或更暗。算法将红色通道、绿色通道、蓝色通道，同时加上一个正值或负值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">brightness = <span class="function"><span class="keyword">function</span> <span class="params">(pixels, delta)</span> {</span></div><div class="line"></div><div class="line">    <span class="keyword">var</span> d = pixels.data;</div><div class="line"></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; d.length; i += <span class="number">4</span>) {</div><div class="line">          d[i] += delta;     <span class="comment">// red</span></div><div class="line">          d[i + <span class="number">1</span>] += delta; <span class="comment">// green</span></div><div class="line">          d[i + <span class="number">2</span>] += delta; <span class="comment">// blue   </span></div><div class="line">    }</div><div class="line"></div><div class="line">	<span class="keyword">return</span> pixels;</div><div class="line"></div><div class="line">};</div></pre></td></tr></table></figure>

<p>（5）反转效果</p>
<p>反转效果（invert）是值图片呈现一种色彩颠倒的效果。算法为红、绿、蓝通道都取各自的相反值（255-原值）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">invert = <span class="function"><span class="keyword">function</span> <span class="params">(pixels)</span> {</span></div><div class="line"></div><div class="line">	<span class="keyword">var</span> d = pixels.data;</div><div class="line"></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; d.length; i += <span class="number">4</span>) {</div><div class="line">		d[i] = <span class="number">255</span> - d[i];</div><div class="line">		d[i+<span class="number">1</span>] = <span class="number">255</span> - d[i + <span class="number">1</span>];</div><div class="line">		d[i+<span class="number">2</span>] = <span class="number">255</span> - d[i + <span class="number">2</span>];</div><div class="line">	}</div><div class="line"></div><div class="line">	<span class="keyword">return</span> pixels;</div><div class="line"></div><div class="line">};</div></pre></td></tr></table></figure>

<h3 id="将Canvas转化为图像文件">将Canvas转化为图像文件</h3>
<p>对图像数据做出修改以后，可以使用toDataURL方法，将Canvas数据重新转化成一般的图像文件形式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">convertCanvasToImage</span><span class="params">(canvas)</span> {</span></div><div class="line">  <span class="keyword">var</span> image = <span class="keyword">new</span> Image();</div><div class="line">  image.src = canvas.toDataURL(<span class="string">"image/png"</span>);</div><div class="line">  <span class="keyword">return</span> image;</div><div class="line">}</div></pre></td></tr></table></figure>

<p>上面的代码将Canvas数据，转化成PNG data URI。</p>
<h2 id="保存和恢复上下文">保存和恢复上下文</h2>
<p>save方法用于保存上下文环境，restore方法用于恢复到上一次保存的上下文环境。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ctx.save(); </div><div class="line"></div><div class="line">ctx.shadowOffsetX = <span class="number">10</span>;</div><div class="line">ctx.shadowOffsetY = <span class="number">10</span>;</div><div class="line">ctx.shadowBlur = <span class="number">5</span>;</div><div class="line">ctx.shadowColor = <span class="string">"rgba(0,0,0,0.5)"</span>;</div><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#CC0000"</span>;</div><div class="line">ctx.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line">ctx.restore(); </div><div class="line"></div><div class="line">ctx.fillStyle = <span class="string">"#000000"</span>;</div><div class="line">ctx.fillRect(<span class="number">180</span>,<span class="number">10</span>,<span class="number">150</span>,<span class="number">100</span>);</div></pre></td></tr></table></figure>

<p>上面的代码一共绘制了两个矩形，前一个有阴影，后一个没有。</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li>David Walsh, <a href="http://davidwalsh.name/convert-canvas-image" target="_blank" rel="external">JavaScript Canvas Image Conversion</a></li>
<li>Matt West, <a href="http://blog.teamtreehouse.com/getting-started-with-the-canvas-api" target="_blank" rel="external">Getting Started With The Canvas API</a></li>
<li>John Robinson, <a href="http://www.storminthecastle.com/2013/04/06/how-you-can-do-cool-image-effects-using-html5-canvas/" target="_blank" rel="external">How You Can Do Cool Image Effects Using HTML5 Canvas</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/canvas/" data-id="nncbniw8ybdntd28" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-basic-network" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/basic-network/" class="article-date">
  <time datetime="2014-07-16T10:15:19.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/network/">network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/basic-network/">网络入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我们每天使用互联网，你是否想过，它是如何实现的？</p>
<p>全世界几十亿台电脑，连接在一起，两两通信。上海的某一块网卡送出信号，洛杉矶的另一块网卡居然就收到了，两者实际上根本不知道对方的物理位置，你不觉得这是很神奇的事情吗？</p>
<p>互联网的核心是一系列协议，总称为”互联网协议”（Internet Protocol Suite）。它们对电脑如何连接和组网，做出了详尽的规定。理解了这些协议，就理解了互联网的原理。</p>
<p>下面就是我的学习笔记。因为这些协议实在太复杂、太庞大，我想整理一个简洁的框架，帮助自己从总体上把握它们。为了保证简单易懂，我做了大量的简化，有些地方并不全面和精确，但是应该能够说清楚互联网的原理。</p>
<h2 id="一、概述">一、概述</h2>
<h3 id="1-1_五层模型">1.1 五层模型</h3>
<p>互联网的实现，分成好几层。每一层都有自己的功能，就像建筑物一样，每一层都靠下一层支持。</p>
<p>用户接触到的，只是最上面的一层，根本没有感觉到下面的层。要理解互联网，必须从最下层开始，自下而上理解每一层的功能。</p>
<p>如何分层有不同的模型，有的模型分七层，有的分四层。我觉得，把互联网分成五层，比较容易解释。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052902.png" alt="image"></p>
<p>如上图所示，最底下的一层叫做”实体层”（Physical Layer），最上面的一层叫做”应用层”（Application Layer），中间的三层（自下而上）分别是”链接层”（Link Layer）、”网络层”（Network Layer）和”传输层”（Transport Layer）。越下面的层，越靠近硬件；越上面的层，越靠近用户。<br>它们叫什么名字，其实并不重要。只需要知道，互联网分成若干层就可以了。</p>
<h3 id="1-2_层与协议">1.2 层与协议</h3>
<p>每一层都是为了完成一种功能。为了实现这些功能，就需要大家都遵守共同的规则。</p>
<p>大家都遵守的规则，就叫做”协议”（protocol）。</p>
<p>互联网的每一层，都定义了很多协议。这些协议的总称，就叫做”互联网协议”（Internet Protocol Suite）。它们是互联网的核心，下面介绍每一层的功能，主要就是介绍每一层的主要协议。</p>
<h2 id="二、实体层">二、实体层</h2>
<p>我们从最底下的一层开始。</p>
<p>电脑要组网，第一件事要干什么？当然是先把电脑连起来，可以用光缆、电缆、双绞线、无线电波等方式。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052903.png" alt="image"></p>
<p>这就叫做”实体层”，它就是把电脑连接起来的物理手段。它主要规定了网络的一些电气特性，作用是负责传送0和1<br>的电信号。</p>
<h2 id="三、链接层">三、链接层</h2>
<h3 id="3-1_定义">3.1 定义</h3>
<p>单纯的0和1没有任何意义，必须规定解读方式：多少个电信号算一组？每个信号位有何意义？</p>
<p>这就是”链接层”的功能，它在”实体层”的上方，确定了0和1的分组方式。</p>
<h3 id="3-2_以太网协议">3.2 以太网协议</h3>
<p>早期的时候，每家公司都有自己的电信号分组方式。逐渐地，一种叫做”以太网”（Ethernet）的协议，占据了主导地位。</p>
<p>以太网规定，一组电信号构成一个数据包，叫做”帧”（Frame）。每一帧分成两个部分：标头（Head）和数据（Data）。<br><img src="http://image.beekka.com/blog/201205/bg2012052904.png" alt="image"></p>
<p>“标头”包含数据包的一些说明项，比如发送者、接受者、数据类型等等；”数据”则是数据包的具体内容。</p>
<p>“标头”的长度，固定为18字节。”数据”的长度，最短为46字节，最长为1500字节。因此，整个”帧”最短为64字节，最长为1518字节。如果数据很长，就必须分割成多个帧进行发送。</p>
<h3 id="3-3_MAC地址">3.3 MAC地址</h3>
<p>上面提到，以太网数据包的”标头”，包含了发送者和接受者的信息。那么，发送者和接受者是如何标识呢？<br>以太网规定，连入网络的所有设备，都必须具有”网卡”接口。数据包必须是从一块网卡，传送到另一块网卡。网卡的地址，就是数据包的发送地址和接收地址，这叫做MAC地址。</p>
<p>每块网卡出厂的时候，都有一个全世界独一无二的MAC地址，长度是48个二进制位，通常用12个十六进制数表示。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052906.png" alt="image"></p>
<p>前6个十六进制数是厂商编号，后6个是该厂商的网卡流水号。有了MAC地址，就可以定位网卡和数据包的路径了。</p>
<h3 id="3-4_广播">3.4 广播</h3>
<p>定义地址只是第一步，后面还有更多的步骤。</p>
<p>首先，一块网卡怎么会知道另一块网卡的MAC地址？</p>
<p>回答是有一种ARP协议，可以解决这个问题。这个留到后面介绍，这里只需要知道，以太网数据包必须知道接收方的MAC地址，然后才能发送。</p>
<p>其次，就算有了MAC地址，系统怎样才能把数据包准确送到接收方？</p>
<p>回答是以太网采用了一种很”原始”的方式，它不是把数据包准确送到接收方，而是向本网络内所有计算机发送，让每台计算机自己判断，是否为接收方。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052907.png" alt="image"></p>
<p>上图中，1号计算机向2号计算机发送一个数据包，同一个子网络的3号、4号、5号计算机都会收到这个包。它们读取这个包的”标头”，找到接收方的MAC地址，然后与自身的MAC地址相比较，如果两者相同，就接受这个包，做进一步处理，否则就丢弃这个包。这种发送方式就叫做”广播”（broadcasting）。</p>
<p>有了数据包的定义、网卡的MAC地址、广播的发送方式，”链接层”就可以在多台计算机之间传送数据了。</p>
<h2 id="四、网络层">四、网络层</h2>
<h3 id="4-1_网络层的由来">4.1 网络层的由来</h3>
<p>以太网协议，依靠MAC地址发送数据。理论上，单单依靠MAC地址，上海的网卡就可以找到洛杉矶的网卡了，技术上是可以实现的。</p>
<p>但是，这样做有一个重大的缺点。以太网采用广播方式发送数据包，所有成员人手一”包”，不仅效率低，而且局限在发送者所在的子网络。也就是说，如果两台计算机不在同一个子网络，广播是传不过去的。这种设计是合理的，否则互联网上每一台计算机都会收到所有包，那会引起灾难。</p>
<p>互联网是无数子网络共同组成的一个巨型网络，很像想象上海和洛杉矶的电脑会在同一个子网络，这几乎是不可能的。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052914.png" alt="image"></p>
<p>因此，必须找到一种方法，能够区分哪些MAC地址属于同一个子网络，哪些不是。如果是同一个子网络，就采用广播方式发送，否则就采用”路由”方式发送。（”路由”的意思，就是指如何向不同的子网络分发数据包，这是一个很大的主题，本文不涉及。）遗憾的是，MAC地址本身无法做到这一点。它只与厂商有关，与所处网络无关。</p>
<p>这就导致了”网络层”的诞生。它的作用是引进一套新的地址，使得我们能够区分不同的计算机是否属于同一个子网络。这套地址就叫做”网络地址”，简称”网址”。</p>
<p>于是，”网络层”出现以后，每台计算机有了两种地址，一种是MAC地址，另一种是网络地址。两种地址之间没有任何联系，MAC地址是绑定在网卡上的，网络地址则是管理员分配的，它们只是随机组合在一起。</p>
<p>网络地址帮助我们确定计算机所在的子网络，MAC地址则将数据包送到该子网络中的目标网卡。因此，从逻辑上可以推断，必定是先处理网络地址，然后再处理MAC地址。</p>
<h3 id="4-2_IP协议">4.2 IP协议</h3>
<p>规定网络地址的协议，叫做IP协议。它所定义的地址，就被称为IP地址。</p>
<p>目前，广泛采用的是IP协议第四版，简称IPv4。这个版本规定，网络地址由32个二进制位组成。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052908.png" alt="image"></p>
<p>习惯上，我们用分成四段的十进制数表示IP地址，从0.0.0.0一直到255.255.255.255。</p>
<p>互联网上的每一台计算机，都会分配到一个IP地址。这个地址分成两个部分，前一部分代表网络，后一部分代表主机。比如，IP地址172.16.254.1，这是一个32位的地址，假定它的网络部分是前24位（172.16.254），那么主机部分就是后8位（最后的那个1）。处于同一个子网络的电脑，它们IP地址的网络部分必定是相同的，也就是说172.16.254.2应该与172.16.254.1处在同一个子网络。</p>
<p>但是，问题在于单单从IP地址，我们无法判断网络部分。还是以172.16.254.1为例，它的网络部分，到底是前24位，还是前16位，甚至前28位，从IP地址上是看不出来的。</p>
<p>那么，怎样才能从IP地址，判断两台计算机是否属于同一个子网络呢？这就要用到另一个参数”子网掩码”（subnet mask）。</p>
<p>所谓”子网掩码”，就是表示子网络特征的一个参数。它在形式上等同于IP地址，也是一个32位二进制数字，它的网络部分全部为1，主机部分全部为0。比如，IP地址172.16.254.1，如果已知网络部分是前24位，主机部分是后8位，那么子网络掩码就是11111111.11111111.11111111.00000000，写成十进制就255.255.255.0。</p>
<p>知道”子网掩码”，我们就能判断，任意两个IP地址是否处在同一个子网络。方法是将两个IP地址与子网掩码分别进行AND运算（两个数位都为1，运算结果为1，否则为0），然后比较结果是否相同，如果是的话，就表明它们在同一个子网络中，否则就不是。</p>
<p>比如，已知IP地址172.16.254.1和172.16.254.233的子网掩码都是255.255.255.0，请问它们是否在同一个子网络？两者与子网掩码分别进行AND运算，结果都是172.16.254.0，因此它们在同一个子网络。</p>
<p>总结一下，IP协议的作用主要有两个，一个是为每一台计算机分配IP地址，另一个是确定哪些地址在同一个子网络。</p>
<h3 id="4-3_IP数据包">4.3 IP数据包</h3>
<p>根据IP协议发送的数据，就叫做IP数据包。不难想象，其中必定包括IP地址信息。</p>
<p>但是前面说过，以太网数据包只包含MAC地址，并没有IP地址的栏位。那么是否需要修改数据定义，再添加一个栏位呢？</p>
<p>回答是不需要，我们可以把IP数据包直接放进以太网数据包的”数据”部分，因此完全不用修改以太网的规格。这就是互联网分层结构的好处：上层的变动完全不涉及下层的结构。</p>
<p>具体来说，IP数据包也分为”标头”和”数据”两个部分。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052909.png" alt="image"></p>
<p>“标头”部分主要包括版本、长度、IP地址等信息，”数据”部分则是IP数据包的具体内容。它放进以太网数据包后，以太网数据包就变成了下面这样。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052910.png" alt="image"></p>
<p>IP数据包的”标头”部分的长度为20到60字节，整个数据包的总长度最大为65,535字节。因此，理论上，一个IP数据包的”数据”部分，最长为65,515字节。前面说过，以太网数据包的”数据”部分，最长只有1500字节。因此，如果IP数据包超过了1500字节，它就需要分割成几个以太网数据包，分开发送了。</p>
<h3 id="4-4_ARP协议">4.4 ARP协议</h3>
<p>关于”网络层”，还有最后一点需要说明。</p>
<p>因为IP数据包是放在以太网数据包里发送的，所以我们必须同时知道两个地址，一个是对方的MAC地址，另一个是对方的IP地址。通常情况下，对方的IP地址是已知的（后文会解释），但是我们不知道它的MAC地址。</p>
<p>所以，我们需要一种机制，能够从IP地址得到MAC地址。</p>
<p>这里又可以分成两种情况。第一种情况，如果两台主机不在同一个子网络，那么事实上没有办法得到对方的MAC地址，只能把数据包传送到两个子网络连接处的”网关”（gateway），让网关去处理。</p>
<p>第二种情况，如果两台主机在同一个子网络，那么我们可以用ARP协议，得到对方的MAC地址。ARP协议也是发出一个数据包（包含在以太网数据包中），其中包含它所要查询主机的IP地址，在对方的MAC地址这一栏，填的是FF:FF:FF:FF:FF:FF，表示这是一个”广播”地址。它所在子网络的每一台主机，都会收到这个数据包，从中取出IP地址，与自身的IP地址进行比较。如果两者相同，都做出回复，向对方报告自己的MAC地址，否则就丢弃这个包。</p>
<p>总之，有了ARP协议之后，我们就可以得到同一个子网络内的主机MAC地址，可以把数据包发送到任意一台主机之上了。</p>
<h2 id="五、传输层">五、传输层</h2>
<h3 id="5-1_传输层的由来">5.1 传输层的由来</h3>
<p>有了MAC地址和IP地址，我们已经可以在互联网上任意两台主机上建立通信。</p>
<p>接下来的问题是，同一台主机上有许多程序都需要用到网络，比如，你一边浏览网页，一边与朋友在线聊天。当一个数据包从互联网上发来的时候，你怎么知道，它是表示网页的内容，还是表示在线聊天的内容？</p>
<p>也就是说，我们还需要一个参数，表示这个数据包到底供哪个程序（进程）使用。这个参数就叫做”端口”（port），它其实是每一个使用网卡的程序的编号。每个数据包都发到主机的特定端口，所以不同的程序就能取到自己所需要的数据。</p>
<p>“端口”是0到65535之间的一个整数，正好16个二进制位。0到1023的端口被系统占用，用户只能选用大于1023的端口。不管是浏览网页还是在线聊天，应用程序会随机选用一个端口，然后与服务器的相应端口联系。</p>
<p>“传输层”的功能，就是建立”端口到端口”的通信。相比之下，”网络层”的功能是建立”主机到主机”的通信。只要确定主机和端口，我们就能实现程序之间的交流。因此，Unix系统就把主机+端口，叫做”套接字”（socket）。有了它，就可以进行网络应用程序开发了。</p>
<h3 id="5-2_UDP协议">5.2 UDP协议</h3>
<p>现在，我们必须在数据包中加入端口信息，这就需要新的协议。最简单的实现叫做UDP协议，它的格式几乎就是在数据前面，加上端口号。</p>
<p>UDP数据包，也是由”标头”和”数据”两部分组成。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052911.png" alt="image"></p>
<p>“标头”部分主要定义了发出端口和接收端口，”数据”部分就是具体的内容。然后，把整个UDP数据包放入IP数据包的”数据”部分，而前面说过，IP数据包又是放在以太网数据包之中的，所以整个以太网数据包现在变成了下面这样：</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052912.png" alt="image"></p>
<p>UDP数据包非常简单，”标头”部分一共只有8个字节，总长度不超过65,535字节，正好放进一个IP数据包。</p>
<h3 id="5-3_TCP协议">5.3 TCP协议</h3>
<p>UDP协议的优点是比较简单，容易实现，但是缺点是可靠性较差，一旦数据包发出，无法知道对方是否收到。<br>为了解决这个问题，提高网络可靠性，TCP协议就诞生了。这个协议非常复杂，但可以近似认为，它就是有确认机制的UDP协议，每发出一个数据包都要求确认。如果有一个数据包遗失，就收不到确认，发出方就知道有必要重发这个数据包了。</p>
<p>因此，TCP协议能够确保数据不会遗失。它的缺点是过程复杂、实现困难、消耗较多的资源。</p>
<p>TCP数据包和UDP数据包一样，都是内嵌在IP数据包的”数据”部分。TCP数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。</p>
<h2 id="六、应用层">六、应用层</h2>
<p>应用程序收到”传输层”的数据，接下来就要进行解读。由于互联网是开放架构，数据来源五花八门，必须事先规定好格式，否则根本无法解读。</p>
<p>“应用层”的作用，就是规定应用程序的数据格式。</p>
<p>举例来说，TCP协议可以为各种各样的程序传递数据，比如Email、WWW、FTP等等。那么，必须有不同协议规定电子邮件、网页、FTP数据的格式，这些应用程序协议就构成了”应用层”。</p>
<p>这是最高的一层，直接面对用户。它的数据就放在TCP数据包的”数据”部分。因此，现在的以太网的数据包就变成下面这样。</p>
<p><img src="http://image.beekka.com/blog/201205/bg2012052913.png" alt="image"></p>
<p>至此，整个互联网的五层结构，自下而上全部讲完了。这是从系统的角度，解释互联网是如何构成的。下一篇，我反过来，从用户的角度，自上而下看看这个结构是如何发挥作用，完成一次网络数据交换的。</p>
<h2 id="七、一个小结">七、一个小结</h2>
<p>先对前面的内容，做一个小结。</p>
<p>我们已经知道，网络通信就是交换数据包。电脑A向电脑B发送一个数据包，后者收到了，回复一个数据包，从而实现两台电脑之间的通信。数据包的结构，基本上是下面这样：</p>
<p>发送这个包，需要知道两个地址：</p>
<p>　　* 对方的MAC地址</p>
<p>　　* 对方的IP地址</p>
<p>有了这两个地址，数据包才能准确送到接收者手中。但是，前面说过，MAC地址有局限性，如果两台电脑不在同一个子网络，就无法知道对方的MAC地址，必须通过网关（gateway）转发。</p>
<p>上图中，1号电脑要向4号电脑发送一个数据包。它先判断4号电脑是否在同一个子网络，结果发现不是（后文介绍判断方法），于是就把这个数据包发到网关A。网关A通过路由协议，发现4号电脑位于子网络B，又把数据包发给网关B，网关B再转发到4号电脑。</p>
<p>1号电脑把数据包发到网关A，必须知道网关A的MAC地址。所以，数据包的目标地址，实际上分成两种情况：</p>
<p>场景    数据包地址</p>
<p>同一个子网络    对方的MAC地址，对方的IP地址</p>
<p>非同一个子网络    网关的MAC地址，对方的IP地址</p>
<p>发送数据包之前，电脑必须判断对方是否在同一个子网络，然后选择相应的MAC地址。接下来，我们就来看，实际使用中，这个过程是怎么完成的。</p>
<h2 id="八、用户的上网设置">八、用户的上网设置</h2>
<h3 id="8-1_静态IP地址">8.1 静态IP地址</h3>
<p>你买了一台新电脑，插上网线，开机，这时电脑能够上网吗？</p>
<p>通常你必须做一些设置。有时，管理员（或者ISP）会告诉你下面四个参数，你把它们填入操作系统，计算机就能连上网了：</p>
<p>　　* 本机的IP地址</p>
<p>　　* 子网掩码</p>
<p>　　* 网关的IP地址</p>
<p>　　* DNS的IP地址</p>
<p>下图是Windows系统的设置窗口。</p>
<p>这四个参数缺一不可，后文会解释为什么需要知道它们才能上网。由于它们是给定的，计算机每次开机，都会分到同样的IP地址，所以这种情况被称作”静态IP地址上网”。</p>
<p>但是，这样的设置很专业，普通用户望而生畏，而且如果一台电脑的IP地址保持不变，其他电脑就不能使用这个地址，不够灵活。出于这两个原因，大多数用户使用”动态IP地址上网”。</p>
<h3 id="8-2_动态IP地址">8.2 动态IP地址</h3>
<p>所谓”动态IP地址”，指计算机开机后，会自动分配到一个IP地址，不用人为设定。它使用的协议叫做DHCP协议。<br>这个协议规定，每一个子网络中，有一台计算机负责管理本网络的所有IP地址，它叫做”DHCP服务器”。新的计算机加入网络，必须向”DHCP服务器”发送一个”DHCP请求”数据包，申请IP地址和相关的网络参数。</p>
<p>前面说过，如果两台计算机在同一个子网络，必须知道对方的MAC地址和IP地址，才能发送数据包。但是，新加入的计算机不知道这两个地址，怎么发送数据包呢？</p>
<p>DHCP协议做了一些巧妙的规定。</p>
<h3 id="8-3_DHCP协议">8.3 DHCP协议</h3>
<p>首先，它是一种应用层协议，建立在UDP协议之上，所以整个数据包是这样的：</p>
<p>　　（1）最前面的”以太网标头”，设置发出方（本机）的MAC地址和接收方（DHCP服务器）的MAC地址。前者就是本机网卡的MAC地址，后者这时不知道，就填入一个广播地址：FF-FF-FF-FF-FF-FF。</p>
<p>　　（2）后面的”IP标头”，设置发出方的IP地址和接收方的IP地址。这时，对于这两者，本机都不知道。于是，发出方的IP地址就设为0.0.0.0，接收方的IP地址设为255.255.255.255。</p>
<p>　　（3）最后的”UDP标头”，设置发出方的端口和接收方的端口。这一部分是DHCP协议规定好的，发出方是68端口，接收方是67端口。</p>
<p>这个数据包构造完成后，就可以发出了。以太网是广播发送，同一个子网络的每台计算机都收到了这个包。因为接收方的MAC地址是FF-FF-FF-FF-FF-FF，看不出是发给谁的，所以每台收到这个包的计算机，还必须分析这个包的IP地址，才能确定是不是发给自己的。当看到发出方IP地址是0.0.0.0，接收方是255.255.255.255，于是DHCP服务器知道”这个包是发给我的”，而其他计算机就可以丢弃这个包。</p>
<p>接下来，DHCP服务器读出这个包的数据内容，分配好IP地址，发送回去一个”DHCP响应”数据包。这个响应包的结构也是类似的，以太网标头的MAC地址是双方的网卡地址，IP标头的IP地址是DHCP服务器的IP地址（发出方）和255.255.255.255（接收方），UDP标头的端口是67（发出方）和68（接收方），分配给请求端的IP地址和本网络的具体参数则包含在Data部分。</p>
<p>新加入的计算机收到这个响应包，于是就知道了自己的IP地址、子网掩码、网关地址、DNS服务器等等参数。</p>
<h3 id="8-4_上网设置：小结">8.4 上网设置：小结</h3>
<p>这个部分，需要记住的就是一点：不管是”静态IP地址”还是”动态IP地址”，电脑上网的首要步骤，是确定四个参数。这四个值很重要，值得重复一遍：</p>
<p>　　* 本机的IP地址</p>
<p>　　* 子网掩码</p>
<p>　　* 网关的IP地址</p>
<p>　　* DNS的IP地址</p>
<p>有了这几个数值，电脑就可以上网”冲浪”了。接下来，我们来看一个实例，当用户访问网页的时候，互联网协议是怎么运作的。</p>
<h2 id="九、一个实例：访问网页">九、一个实例：访问网页</h2>
<h3 id="9-1_本机参数">9.1 本机参数</h3>
<p>我们假定，经过上一节的步骤，用户设置好了自己的网络参数：</p>
<p>　　* 本机的IP地址：192.168.1.100</p>
<p>　　* 子网掩码：255.255.255.0</p>
<p>　　* 网关的IP地址：192.168.1.1</p>
<p>　　* DNS的IP地址：8.8.8.8</p>
<p>然后他打开浏览器，想要访问Google，在地址栏输入了网址：www.google.com。</p>
<p>这意味着，浏览器要向Google发送一个网页请求的数据包。</p>
<h3 id="9-2_DNS协议">9.2 DNS协议</h3>
<p>我们知道，发送数据包，必须要知道对方的IP地址。但是，现在，我们只知道网址www.google.com，不知道它的IP地址。<br>DNS协议可以帮助我们，将这个网址转换成IP地址。已知DNS服务器为8.8.8.8，于是我们向这个地址发送一个DNS数据包（53端口）。</p>
<p>然后，DNS服务器做出响应，告诉我们Google的IP地址是172.194.72.105。于是，我们知道了对方的IP地址。</p>
<h3 id="9-3_子网掩码">9.3 子网掩码</h3>
<p>接下来，我们要判断，这个IP地址是不是在同一个子网络，这就要用到子网掩码。<br>已知子网掩码是255.255.255.0，本机用它对自己的IP地址192.168.1.100，做一个二进制的AND运算（两个数位都为1，结果为1，否则为0），计算结果为192.168.1.0；然后对Google的IP地址172.194.72.105也做一个AND运算，计算结果为172.194.72.0。这两个结果不相等，所以结论是，Google与本机不在同一个子网络。<br>因此，我们要向Google发送数据包，必须通过网关192.168.1.1转发，也就是说，接收方的MAC地址将是网关的MAC地址。</p>
<h3 id="9-4_应用层协议">9.4 应用层协议</h3>
<p>浏览网页用的是HTTP协议，它的整个数据包构造是这样的：</p>
<p>HTTP部分的内容，类似于下面这样：<br>GET / HTTP/1.1Host: www.google.com</p>
<p>Connection: keep-alive</p>
<p>User-Agent: Mozilla/5.0 (Windows NT 6.1) ……</p>
<p>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,<em>/</em>;q=0.8</p>
<p>Accept-Encoding: gzip,deflate,sdch</p>
<p>Accept-Language: zh-CN,zh;q=0.8</p>
<p>Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3</p>
<p>Cookie: … …</p>
<p>我们假定这个部分的长度为4960字节，它会被嵌在TCP数据包之中。</p>
<h3 id="9-5_TCP协议">9.5 TCP协议</h3>
<p>TCP数据包需要设置端口，接收方（Google）的HTTP端口默认是80，发送方（本机）的端口是一个随机生成的1024-65535之间的整数，假定为51775。</p>
<p>TCP数据包的标头长度为20字节，加上嵌入HTTP的数据包，总长度变为4980字节。</p>
<h3 id="9-6_IP协议">9.6 IP协议</h3>
<p>然后，TCP数据包再嵌入IP数据包。IP数据包需要设置双方的IP地址，这是已知的，发送方是192.168.1.100（本机），接收方是172.194.72.105（Google）。</p>
<p>IP数据包的标头长度为20字节，加上嵌入的TCP数据包，总长度变为5000字节。</p>
<h3 id="9-7_以太网协议">9.7 以太网协议</h3>
<p>最后，IP数据包嵌入以太网数据包。以太网数据包需要设置双方的MAC地址，发送方为本机的网卡MAC地址，接收方为网关192.168.1.1的MAC地址（通过ARP协议得到）。</p>
<p>以太网数据包的数据部分，最大长度为1500字节，而现在的IP数据包长度为5000字节。因此，IP数据包必须分割成四个包。因为每个包都有自己的IP标头（20字节），所以四个包的IP数据包的长度分别为1500、1500、1500、560。</p>
<h3 id="9-8_服务器端响应">9.8 服务器端响应</h3>
<p>经过多个网关的转发，Google的服务器172.194.72.105，收到了这四个以太网数据包。</p>
<p>根据IP标头的序号，Google将四个包拼起来，取出完整的TCP数据包，然后读出里面的”HTTP请求”，接着做出”HTTP响应”，再用TCP协议发回来。</p>
<p>本机收到HTTP响应以后，就可以将网页显示出来，完成一次网络通信。</p>
<p>这个例子就到此为止，虽然经过了简化，但它大致上反映了互联网协议的整个通信过程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/basic-network/" data-id="ex0m9li1rvi46ffw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/hello-world/" class="article-date">
  <time datetime="2014-07-16T09:43:31.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">trobuleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2>
<h3 id="Create_a_new_post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>

<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/hello-world/" data-id="brxe9whueq2wexjf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-using-nodejs-webkit" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/using-nodejs-webkit/" class="article-date">
  <time datetime="2014-07-15T22:31:00.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nodejs/">nodejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/using-nodejs-webkit/">Using nodejs to develop desktop app</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="目录">目录</h1>
<h3 id="一、node-webkit是什么？">一、node-webkit是什么？</h3>
<h3 id="二、node-webkit有些什么干货？">二、node-webkit有些什么干货？</h3>
<h3 id="三、node-webkit的基本工作原理是怎样的？">三、node-webkit的基本工作原理是怎样的？</h3>
<h3 id="四、怎样用node-webkit进行客户端开发？">四、怎样用node-webkit进行客户端开发？</h3>
<h3 id="五、如何做到开发一份代码，生成多平台APP？">五、如何做到开发一份代码，生成多平台APP？</h3>
<h3 id="六、使用node-webkit开发桌面客户端的优缺点？">六、使用node-webkit开发桌面客户端的优缺点？</h3>
<h3 id="七、Q_&amp;_A!">七、Q &amp; A!</h3>
<h3 id="一、node-webkit是什么？-1">一、node-webkit是什么？</h3>
<h4 id="1、概念">1、概念</h4>
<p>基于node.js和chromium的应用程序实时运行环境，可运行通过HTML(5)、CSS(3)、Javascript来编写的本地应用程序。node.js和webkit的结合体，webkit提供DOM操作，node.js提供本地化操作；且将二者的context完全整合，可在HTML代码中直接使用node.js的API。</p>
<h4 id="2、获取node-webkit">2、获取node-webkit</h4>
<p>官网：<a href="https://github.com/rogerwang/node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit</a></p>
<p>支持的平台：Windows 32bit，Linux 32/64bit，Mac 32bit(OS X 10.7+)</p>
<p>选择与平台相对应的版本，下载并安装即可。</p>
<h3 id="二、node-webkit有些什么干货？-1">二、node-webkit有些什么干货？</h3>
<p>官方提供的一些成品：<a href="https://github.com/rogerwang/node-webkit/wiki/List-of-apps-and-companies-using-node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit/wiki/List-of-apps-and-companies-using-node-webkit</a></p>
<h3 id="三、node-webkit的基本工作原理是怎样的？-1">三、node-webkit的基本工作原理是怎样的？</h3>
<p>webkit提供DOM操作，包括HTML解析、CSS渲染、Javascript解释执行、DOM事件处理等。而node.js则提供一些本地化的操作、服务器端的处理等。二者的上下文完全融合，实现一个较为完美的本地应用环境。</p>
<h3 id="四、怎样用node-webkit进行客户端开发？-1">四、怎样用node-webkit进行客户端开发？</h3>
<h4 id="1、一个node-webkit项目的基本目录结构">1、一个node-webkit项目的基本目录结构</h4>
<p>上面这是一个简单nw应用的目录结构，如果nw应用中需要用到额外的node_module，可以在目录结构中增加一个node_modules的目录，以存放APP所需的node插件。</p>
<p>其实，一个最最简单的nw应用，只需要有mail.html和package.json文件即可，如下：</p>
<h4 id="2、认识package-json">2、认识package.json</h4>
<p>“Every app package should contain a manifest file named package.json, it will tell node-webkit how to open the app and control how the browser behaves. ”</p>
<p>package.json格式如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">    "main": "main.html",                              /* APP的主入口，文件名任意；必选 */</div><div class="line">    "name": "nw-demo",                                /* APP的名称，必须具备唯一性，且符合正常变量命名；必选 */</div><div class="line">    "description": "demo app of node-webkit",         /* APP的简单描述 */</div><div class="line">    "version": "0.1.0",                               /* APP的版本号 */</div><div class="line">    "keywords": [ "demo", "node-webkit" ],            /* APP的关键字，搜索APP时用到 */</div><div class="line">    "window": {                                       /* APP的窗口属性 */</div><div class="line">        "icon": "link.png",                           /* APP图标（windows下，状态栏上可见） */</div><div class="line">        "toolbar": true,                              /* 是否显示工具栏 */</div><div class="line">        "width": 800,                                 /* 窗口初始化大小 */</div><div class="line">        "height": 500,</div><div class="line">        "frame": true                                 /* 是否显示外窗体，如最大化、最小化、关闭按钮 */</div><div class="line">    },</div><div class="line">    "user-agent": "%name %ver %nwver %webkit_ver %osinfo" /* 可自定义APP的UA */</div><div class="line">}</div></pre></td></tr></table></figure>



<p>其中，main和name是必选字段，更多配置字段，可参考官方地址：<a href="https://github.com/rogerwang/node-webkit/wiki/Manifest-Format" target="_blank" rel="external">https://github.com/rogerwang/node-webkit/wiki/Manifest-Format</a></p>
<h4 id="3、主窗口mail-html的写法">3、主窗口mail.html的写法</h4>
<p>随意写，和普通的前端页面开发方式一样！</p>
<h4 id="4、最简单的HelloWorld">4、最简单的HelloWorld</h4>
<p>Create <code>index.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">    We are using node.js <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">document.write(process.version)</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>.</div><div class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>Create <code>package.json</code>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"nw-demo"</span></span>,</div><div class="line">  "<span class="attribute">main</span>": <span class="value"><span class="string">"index.html"</span></span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>Compress <code>index.html</code> and <code>package.json</code> into a zip archive called <code>app.nw</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ zip app.nw index.html package.json</div></pre></td></tr></table></figure>

<p>This should create a structure like this:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app<span class="preprocessor">.nw</span></div><div class="line">|-- package<span class="preprocessor">.json</span></div><div class="line">`-- index<span class="preprocessor">.html</span></div></pre></td></tr></table></figure>

<p>Download the prebuilt binary for your platform and use it to open the<br><code>app.nw</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./nw app.nw</div></pre></td></tr></table></figure>

<p>也许你会觉得这个界面特别熟悉，没错，它就是chromium！只是在node-webkit中，我们可以通过修改package.json配置，把工具栏和外框去掉，修改后的配置为：</p>
<p>去掉外框后的运行效果：</p>
<p>你一定会发现去掉toolbar和frame以后，窗口没法被拖动了，其实，可以通过下面这句css来实现窗口可拖动：</p>
<h3 id="五、如何做到开发一份代码，生成多平台APP？-1">五、如何做到开发一份代码，生成多平台APP？</h3>
<h4 id="1、nw包制作">1、nw包制作</h4>
<p>完成上面的操作，已经生成了一个名为hello-world.nw的文件，如果本机已经安装过node-webkit，双击该文件即可运行。但是，针对未安装过node-webkit的用户，还需要将此nw的运行环境也打包在一起，并生成通用可执行文件，Mac上<em>.app，Windows上</em>.exe。</p>
<h4 id="2、针对Mac_OS_X，*-app文件制作">2、针对Mac OS X，*.app文件制作</h4>
<p>a）、app.icns文件制作</p>
<p>为你的App制作特定图标，可准备一张1024*1024的png图片，利用icns-Tool工具生成app.icns图标文件。</p>
<p>b）、修改Info.plist文件</p>
<p>为你的App制作或修改特定的描述文件。</p>
<p>c）、打包*.app</p>
<p>从官网再次下载node-webkit的Mac版，命令行执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mv hello-world.nw app.nw </div><div class="line">cp app.nw node-webkit.app/Contents/Resources/</div><div class="line">cp app.icns node-webkit.app/Contents/Resources/</div><div class="line">cp Info.plist node-webkit.app/Contents/</div><div class="line">mv node-webkit.app hello-wrold.app</div></pre></td></tr></table></figure><br>至此，Mac OS X版本的可执行程序hello-world.app制作完成。<br><br>一般情况下，都会将其压缩后再进行传播。<br><br>#### 3）、针对Windows，*.exe文件制作 ####<br><br>windows版本的exe程序制作非常容易，从官网下载node-webkit.exe，cmd下执行：<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">copy /b node-webkit<span class="preprocessor">.exe</span>+app<span class="preprocessor">.exe</span> hello-world<span class="preprocessor">.exe</span></div></pre></td></tr></table></figure><br>在Linux环境下，可以使用如下命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">cat node-webkit.exe app.exe &gt; hello-world.exe</div></pre></td></tr></table></figure><br>至此，Windows版本的hello-world.exe程序制作完成。<br><br><br><br>4）、将繁琐重复的操作整合到一个build.sh脚本中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="shebang">#! sh</span></div><div class="line">app_name=<span class="string">"system-info"</span></div><div class="line"><span class="comment"># 创建app.nw文件</span></div><div class="line"><span class="built_in">cd</span> ../ && rm -rf output && mkdir output cp</div><div class="line">rm -rf output</div><div class="line">-r <span class="variable">$app_name</span>/* output</div><div class="line">rm -rf output/Info.plist output/build.sh output/app.icns</div><div class="line"><span class="built_in">cd</span> output/</div><div class="line">find . -type d -name <span class="string">".svn"</span> | xargs rm -rf</div><div class="line">zip -r ../app.nw * &gt; /dev/null;</div><div class="line">rm -rf * && <span class="built_in">cd</span> ../ && mv app.nw output/</div><div class="line">mv output <span class="variable">$app_name</span>/ && <span class="built_in">cd</span> <span class="variable">$app_name</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"create nw file success!"</span></div><div class="line"></div><div class="line"><span class="comment">#下载基础包</span></div><div class="line">svn co svn://localhost/node-webkit-base output &gt; /dev/null</div><div class="line"></div><div class="line"><span class="comment">#创建mac版本app</span></div><div class="line"><span class="built_in">cd</span> output</div><div class="line">unzip mac-os-x.zip <span class="operator">-d</span> mac-os-x &gt; /dev/null</div><div class="line">rm -rf mac-os-x.zip mac-os-x/nwsnapshot</div><div class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ../Info.plist ];<span class="keyword">then</span></div><div class="line">cp ../Info.plist mac-os-x/node-webkit.app/Contents/</div><div class="line"><span class="keyword">fi</span></div><div class="line">cp app.nw mac-os-x/node-webkit.app/Contents/Resources/</div><div class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ../app.icns ];<span class="keyword">then</span></div><div class="line">cp ../app.icns mac-os-x/node-webkit.app/Contents/Resources/</div><div class="line"><span class="keyword">fi</span></div><div class="line">mv mac-os-x/node-webkit.app mac-os-x/<span class="variable">$app_name</span>.app</div><div class="line"><span class="built_in">echo</span> <span class="string">"create mac os app success!"</span></div><div class="line"></div><div class="line"><span class="comment">#创建windows版本app</span></div><div class="line">unzip win-<span class="number">32</span>.zip <span class="operator">-d</span> win-<span class="number">32</span> &gt; /dev/null</div><div class="line">rm -rf win-<span class="number">32</span>.zip win-<span class="number">32</span>/nwsnapshot</div><div class="line">cp app.nw win-<span class="number">32</span>/ && <span class="built_in">cd</span> win-<span class="number">32</span></div><div class="line">cat nw.exe app.nw &gt; <span class="variable">$app_name</span>.exe</div><div class="line">rm -rf nw.exe nwsnapshot.exe</div><div class="line"><span class="built_in">cd</span> ..</div><div class="line"><span class="built_in">echo</span> <span class="string">"create windows app success!"</span></div><div class="line"></div><div class="line"><span class="comment">#删除app.nw</span></div><div class="line">rm <span class="operator">-f</span> app.nw</div></pre></td></tr></table></figure>


<h3 id="六、使用node-webkit开发桌面客户端的优缺点？-1">六、使用node-webkit开发桌面客户端的优缺点？</h3>
<p>1、优点</p>
<ul>
<li>提高UI开发效率，DOM中丰富的事件等可以涵盖绝大多数桌面开发中的情况</li>
<li>HTML(5)与CSS(3)拥有丰富的展现效果，可以更容易地对界面进行改版、换肤</li>
<li>容易实现跨平台:Mac OS X 、Windows、Linux</li>
<li>使用Web开发人员工具可以使 UI 调试变得很轻松</li>
<li>桌面程序UI与Web版UI可以共享代码</li>
</ul>
<p>2）、缺点</p>
<ul>
<li>浏览器原生API几乎仅仅局限在Web页面上</li>
<li>若通过JavaScript引擎向Web前端暴露一些具有操作客户端权限的API，如何保证代码安全性</li>
<li>必须携带浏览器内核运行库，无形增加程序体积，至少20MB以上（压缩后）</li>
<li>能否满足各种复杂怪异的需求，比如异型窗口</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/using-nodejs-webkit/" data-id="nibkqvckgbzs1pvz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-basic-tcl-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/15/basic-tcl-command/" class="article-date">
  <time datetime="2014-07-14T22:31:00.000Z" itemprop="datePublished">Jul 15 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Tcl/">Tcl</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/15/basic-tcl-command/">Basic commands of Tcl</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Tcl_学习之路">Tcl 学习之路</h2>
<h3 id="变量">变量</h3>
<ul>
<li>tcl变量在初始化的时候无类型</li>
<li>使用set xxx = xxxx进行初始化</li>
<li>使用set xxx可以查看xxx的值</li>
<li>使用unset将变量release掉</li>
<li>预定义的变量包括env（系统变量）argv（脚本执行的参数）argc（脚本参数的个数）argv0执行脚本的程序名</li>
</ul>
<h3 id="【】的使用">【】的使用</h3>
<ul>
<li>【】用于将内部命令结果的返回值作为另外一个命令的参数</li>
<li>比如 set var2 【set var】就把var的只传给了var2</li>
</ul>
<h3 id="“”的使用">“”的使用</h3>
<ul>
<li>用于把一段内容封装成string类型</li>
<li>比如 set var “multiple word”</li>
<li>可以在“”中加入【】之类进行替换</li>
<li>比如 set b “a is [set a]” 会打印a is 2</li>
<li>特殊字符如\n等同样有效</li>
</ul>
<h3 id="{}的使用">{}的使用</h3>
<ul>
<li>如果内容内部不需要对特殊字符进行处理，那么可以使用{}</li>
<li>如set a {123\n},则不会对\n进行处理</li>
</ul>
<h3 id="数组">数组</h3>
<p>set earnings(January) 87966<br>注意tcl中的array是基于map形式的，没有固定的元素顺序，需要顺序的话可以使用列表，这里的数组有点像java中的set，索引始终是字符串类型的，即使你使用1作为索引，他依然是将1转换成字符串</p>
<h3 id="多维数组">多维数组</h3>
<ul>
<li>可以通过多个索引实现多维数组</li>
<li>例如set matrix（1,1）140</li>
</ul>
<h3 id="查询数组元素">查询数组元素</h3>
<figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> currency(Frence) euro</div><div class="line"><span class="keyword">set</span> currency(Britain) pound</div><div class="line"><span class="keyword">set</span> currency(Japan) yen</div><div class="line">array size currency</div><div class="line"><span class="preprocessor"># =&gt;3</span></div><div class="line">array names currency</div><div class="line"><span class="preprocessor"># =&gt; Britain Japan Frence</span></div><div class="line"><span class="keyword">foreach</span> i [array names currency] {</div><div class="line">	puts currency($i)</div><div class="line">}</div><div class="line"><span class="preprocessor"># =&gt; pound yen euro</span></div></pre></td></tr></table></figure><br>###列表<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">set</span> <span class="operator">a</span> {<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span>}</div><div class="line">lindex $<span class="operator">a</span> <span class="number">2</span></div><div class="line"><span class="comment">#=&gt; 2</span></div><div class="line"><span class="built_in">set</span> <span class="operator">a</span> [list <span class="operator">a</span> b c d e f g]</div><div class="line">lindex $<span class="operator">a</span> <span class="number">2</span></div><div class="line"><span class="comment">#=&gt; b</span></div><div class="line"><span class="comment">#concat ?arg arg ...?</span></div><div class="line"><span class="comment">#使用多个arg来组成一个列表，这两个命令使用频度很高，使用也非常简单</span></div></pre></td></tr></table></figure><br>###字符串操作<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">string</span> length <span class="keyword">string</span></div><div class="line"><span class="preprocessor">#返回String中的字符串个数</span></div><div class="line"><span class="keyword">string</span> range <span class="keyword">string</span> first last</div><div class="line"><span class="preprocessor">#返回string当中从first到last之间的所有子字符串</span></div><div class="line"><span class="keyword">string</span> match ?-nocase? pattern <span class="keyword">string</span></div><div class="line"><span class="preprocessor">#尝试对string进行匹配，匹配成功返回1，否则返回0</span></div><div class="line"><span class="keyword">string</span> relace <span class="keyword">string</span> first last ？newstring？</div><div class="line"><span class="preprocessor">#尝试将frist到last中间所有字符串替换为newstring</span></div><div class="line"><span class="keyword">string</span> trim <span class="keyword">string</span></div><div class="line"><span class="preprocessor">#尝试删除string前后的空格</span></div><div class="line"><span class="keyword">string</span> compare string1 string2</div><div class="line"><span class="preprocessor">#尝试比较string1和string2</span></div><div class="line"><span class="keyword">string</span> is digit <span class="number">1234</span></div><div class="line"><span class="preprocessor">#返回1234是否为数字</span></div></pre></td></tr></table></figure><br>###正则表达式<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">regex {^<span class="attr_selector">[0-9]</span>+$} 510</div><div class="line">#尝试对后面的字符串进行匹配，若匹配成功返回1，否则返回0</div><div class="line">regex {(<span class="attr_selector">[0-9]</span>+) *(<span class="attr_selector">[a-z]</span>+)}</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/15/basic-tcl-command/" data-id="mflip1549f18qm4v" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-unix-shell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/21/unix-shell/" class="article-date">
  <time datetime="2014-01-20T22:33:00.000Z" itemprop="datePublished">Jan 21 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/shell/">shell</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/21/unix-shell/">Unix Shell</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br>    <strong>1. Linux 脚本编写基础<br><br>    1.1 语法基本介绍<br><br>    1.1.1 开头</strong><br><br>    程序必须以下面的行开始（必须方在文件的第一行）：<br></p>
<p></p><p></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="shebang">#!/bin/sh</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　符号#!用来告诉系统它后面的参数是用来执行该文件的程序。在这个例子中我们使用/bin/sh来执行程序。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　当编辑好脚本时，如果要执行该脚本，还必须使其可执行。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　要使脚本可执行：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:red">编译 chmod +x filename 这样才能用./filename 来运行</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.1.2 注释</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　在进行shell编程时，以#开头的句子表示注释，直到这一行的结束。我们真诚地建议您在程序中使用注释。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　如果您使用了注释，那么即使相当长的时间内没有使用该脚本，您也能在很短的时间内明白该脚本的作用及工作原理。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.1.3 变量</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　在其他编程语言中您必须使用变量。在shell编程中，所有的变量都由字符串组成，并且您不需要对变量进行声明。要赋值给一个变量，您可以这样写：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="shebang">#!/bin/sh</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#对变量赋值：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    a=&quot;hello world&quot;<br></div></p>
<pre><code><span class="comment"># 现在打印变量a的内容：&lt;br /&gt;</span>
<span class="built_in">echo</span> &amp;quot;A is:&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> <span class="variable">$a</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">有时候变量名很容易与其他文字混淆，比如：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    num=2<br><br>    echo &quot;this is the $numnd&quot;<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这并不会打印出&quot;this is the 2nd&quot;，而仅仅打印&quot;this is the &quot;，因为shell会去搜索变量numnd的值，但是这个变量时没有值的。可以使用花括号来告诉shell我们要打印的是num变量：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    num=2<br><br>    echo &quot;this is the ${num}nd&quot;<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将打印： </span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></span></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    this is the 2nd<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.1.4 环境变量</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">由export关键字处理过的变量叫做环境变量。我们不对环境变量进行讨论，因为通常情况下仅仅在登录脚本中使用环境变量。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.1.5 Shell命令和流程控制</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在shell脚本中可以使用三类命令：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1)Unix 命令:</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　虽然在shell脚本中可以使用任意的unix命令，但是还是由一些相对更常用的命令。这些命令通常是用来进行文件和文字操作的。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">常用命令语法及功能</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　echo &quot;some text&quot;: 将文字内容打印在屏幕上</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　ls: 文件列表</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　wc –l filewc -w filewc -c file: 计算文件行数计算文件中的单词数计算文件中的字符数</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　cp sourcefile destfile: 文件拷贝</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　mv oldname newname : 重命名文件或移动文件</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　rm file: 删除文件</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　grep ‘pattern’ file: 在文件内搜索字符串比如：grep ‘searchstring’ file.txt</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　cut -b colnum file: 指定欲显示的文件内容范围，并将它们输出到标准输出设备比如：输出每行第5个到第9个字符cut -b5-9 file.txt千万不要和cat命令混淆，</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这是两个完全不同的命令</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　cat file.txt: 输出文件内容到标准输出设备（屏幕）上</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　file somefile: 得到文件类型</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　read var: 提示用户输入，并将输入赋值给变量</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　sort file.txt: 对file.txt文件中的行进行排序</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　uniq: 删除文本文件中出现的行列比如： sort file.txt | uniq</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　expr: 进行数学运算Example: add 2 and 3expr 2 &quot;+&quot; 3</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　find: 搜索文件比如：根据文件名搜索find . -name filename -print</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　tee: 将数据输出到标准输出设备(屏幕) 和文件比如：somecommand | tee outfile</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　basename file: 返回不包含路径的文件名比如： basename /bin/tux将返回 tux</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　dirname file: 返回文件所在路径比如：dirname /bin/tux将返回 /bin</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　head file: 打印文本文件开头几行</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　tail file : 打印文本文件末尾几行</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　sed: Sed是一个基本的查找替换程序。可以从标准输入（比如命令管道）读入文本，并将</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">结果输出到标准输出（屏幕）。该命令采用正则表达式（见参考）进行搜索。不要和shell中的通配符相混淆。比如：将linuxfocus 替换为LinuxFocus ：</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></span></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cat text.file | sed ‘s/linuxfocus/LinuxFocus/‘ &gt; newtext.file<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　awk: awk 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cat file.txt | awk -F, ‘{print $1 &quot;,&quot; $3 }’<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这里我们使用，作为字段分割符，同时打印第一个和第三个字段。如果该文件内容如下： Adam Bor, 34, IndiaKerry Miller, 22, USA命令输出结果为：Adam Bor, IndiaKerry Miller, USA</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2) 概念: 管道, 重定向和 backtick</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这些不是系统命令，但是他们真的很重要。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">管道 (|) </span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">将一个命令的输出作为另外一个命令的输入。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    grep &quot;hello&quot; file.txt | wc -l<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　在file.txt中搜索包含有”hello”的行并计算其行数。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　在这里grep命令的输出作为wc命令的输入。当然您可以使用多个命令。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　重定向：将命令的结果输出到文件，而不是标准输出（屏幕）。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt;</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> 写入文件并覆盖旧文件</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt;&gt; </span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">加到文件的尾部，保留旧文件内容。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">反短斜线</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　使用反短斜线可以将一个命令的输出作为另外一个命令的一个命令行参数。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">命令：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    find . -mtime -1 -type f -print<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　用来查找过去24小时（-mtime –2则表示过去48小时）内修改过的文件。如果您想将所有查找到的文件打一个包，则可以使用以下脚本：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code>#!/bin/sh&lt;br /&gt;
# The ticks are backticks (<span class="smartquote">`) not normal quotes ('</span>):&lt;br /&gt;
tar -zcvf lastmod.tar.gz <span class="code">`find . -mtime -1 -type f -print`</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3) 流程控制</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.if</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　&quot;if&quot; 表达式 如果条件为真则执行then后面的部分：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    if ….; then<br><br>    　 ….<br><br>    elif ….; then<br><br>    　 ….<br><br>    else<br><br>    　 ….<br><br>    fi<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">大多数情况下，可以使用测试命令来对条件进行测试。比如可以比较字符串、判断文件是否存在及是否可读等等…</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　通常用&quot; [ ] &quot;来表示条件测试。注意这里的空格很重要。要确保方括号的空格。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[ -f &quot;somefile&quot; ] ：判断是否是一个文件</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[ -x &quot;/bin/ls&quot; ] ：判断/bin/ls是否存在并有可执行权限</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[ -n &quot;$var&quot; ] ：判断$var变量是否有值</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[ &quot;$a&quot; = &quot;$b&quot; ] ：判断$a和$b是否相等</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　执行man test可以查看所有测试表达式可以比较和判断的类型。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　直接执行以下脚本：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="keyword">if</span> [ &amp;quot;<span class="variable">$SHELL</span>&amp;quot; = &amp;quot;/bin/bash&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　<span class="built_in">echo</span> &amp;quot;your login shell is the bash (bourne again shell)&amp;quot;&lt;br /&gt;
<span class="keyword">else</span>&lt;br /&gt;
　<span class="built_in">echo</span> &amp;quot;your login shell is not bash but <span class="variable">$SHELL</span>&amp;quot;&lt;br /&gt;
<span class="keyword">fi</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　变量$SHELL包含了登录shell的名称，我们和/bin/bash进行了比较。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">快捷操作符</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">熟悉C语言的朋友可能会很喜欢下面的表达式：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    [ -f &quot;/etc/shadow&quot; ] &amp;&amp; echo &quot;This computer uses shadow passwors&quot;<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这里 &amp;&amp; 就是一个快捷操作符，如果左边的表达式为真则执行右边的语句。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">您也可以认为是逻辑运算中的与操作。上例中表示如果/etc/shadow文件存在则打印” This computer uses shadow passwors”。同样或操作(||)在shell编程中也是可用的。这里有个例子：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
mailfolder=/var/spool/mail/james&lt;br /&gt;
[ -r &amp;quot;<span class="variable">$mailfolder</span>&amp;quot; ]&lt;br /&gt;
<span class="string">'  '</span>{ <span class="built_in">echo</span> &amp;quot;Can not <span class="built_in">read</span> <span class="variable">$mailfolder</span>&amp;quot; ; <span class="keyword">exit</span> <span class="number">1</span>; }&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;<span class="variable">$mailfolder</span> has mail from:&amp;quot;&lt;br /&gt;
grep &amp;quot;^From &amp;quot; <span class="variable">$mailfolder</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">该脚本首先判断mailfolder是否可读。如果可读则打印该文件中的&quot;From&quot; 一行。如果不可读则或操作生效，打印错误信息后脚本退出。这里有个问题，那就是我们必须有两个命令：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　-打印错误信息</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　-退出程序</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　我们使用花括号以匿名函数的形式将两个命令放到一起作为一个命令使用。一般函数将在下文提及。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　不用与和或操作符，我们也可以用if表达式作任何事情，但是使用与或操作符会更便利很多。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2.case</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case :表达式可以用来匹配一个给定的字符串，而不是数字。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    case … in<br><br>    …) do something here ;;<br><br>    esac<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　让我们看一个例子。 file命令可以辨别出一个给定文件的文件类型，比如：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    file lf.gz<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将返回：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    lf.gz: gzip compressed data, deflated, original filename,<br><br>    last modified: Mon Aug 27 23:09:18 2001, os: Unix<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　我们利用这一点写了一个叫做smartzip的脚本，该脚本可以自动解压bzip2, gzip 和zip 类型的压缩文件：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
ftype=`file &amp;quot;<span class="variable">$1</span>&amp;quot;`&lt;br /&gt;
<span class="keyword">case</span> &amp;quot;<span class="variable">$ftype</span>&amp;quot; <span class="keyword">in</span>&lt;br /&gt;
&amp;quot;<span class="variable">$1</span>: Zip archive&amp;quot;*)&lt;br /&gt;
　　unzip &amp;quot;<span class="variable">$1</span>&amp;quot; ;;&lt;br /&gt;
&amp;quot;<span class="variable">$1</span>: gzip compressed&amp;quot;*)&lt;br /&gt;
　　gunzip &amp;quot;<span class="variable">$1</span>&amp;quot; ;;&lt;br /&gt;
&amp;quot;<span class="variable">$1</span>: bzip2 compressed&amp;quot;*)&lt;br /&gt;
　　bunzip2 &amp;quot;<span class="variable">$1</span>&amp;quot; ;;&lt;br /&gt;
*) <span class="built_in">echo</span> &amp;quot;File <span class="variable">$1</span> can not be uncompressed with smartzip&amp;quot;;;&lt;br /&gt;
<span class="keyword">esac</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　您可能注意到我们在这里使用了一个特殊的变量$1。该变量包含了传递给该程序的第一个参数值。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">也就是说，当我们运行：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    smartzip articles.zip<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$1 就是字符串 articles.zip</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3. selsect</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">select 表达式是一种bash的扩展应用，尤其擅长于交互式使用。用户可以从一组不同的值中进行选择。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    select var in … ; do<br><br>    　break<br><br>    done<br><br>    …. now $var can be used ….<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">下面是一个例子：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="shebang">#!/bin/sh&lt;br /&gt;</span>
echo &amp;quot;What <span class="keyword">is</span> your favourite OS?&amp;quot;&lt;br /&gt;
select var <span class="keyword">in</span> &amp;quot;Linux&amp;quot; &amp;quot;Gnu Hurd&amp;quot; &amp;quot;Free BSD&amp;quot; &amp;quot;Other&amp;quot;; <span class="keyword">do</span>&lt;br /&gt;
　　　　<span class="keyword">break</span>&lt;br /&gt;
done&lt;br /&gt;
echo &amp;quot;You have selected $var&amp;quot;
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　下面是该脚本运行的结果：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    What is your favourite OS?<br><br>    1) Linux<br><br>    2) Gnu Hurd<br><br>    3) Free BSD<br><br>    4) Other<br></div></p>
<pre><code><span class="preprocessor">#? 1&lt;br /&gt;</span>
You have selected Linux
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4.loop</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">loop表达式：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    while …; do<br><br>    ….<br><br>    done<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while-loop </span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">将运行直到表达式测试为真。will run while the expression that we test for is true.</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">关键字&quot;break&quot; 用来跳出循环。而关键字”continue”用来不执行余下的部分而直接跳到下一个循环。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">for-loop</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">表达式查看一个字符串列表 (字符串用空格分隔) 然后将其赋给一个变量：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    for var in ….; do<br><br>    　 ….<br><br>    done<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在下面的例子中，将分别打印ABC到屏幕上：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="shebang">#!/bin/sh&lt;br /&gt;</span>
<span class="keyword">for</span> var <span class="keyword">in</span> A B C ; <span class="keyword">do</span>&lt;br /&gt;
　 echo &amp;quot;var <span class="keyword">is</span> $var&amp;quot;&lt;br /&gt;
done
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">下面是一个更为有用的脚本showrpm，其功能是打印一些RPM包的统计信息：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="comment"># list a content summary of a number of RPM packages&lt;br /&gt;</span>
<span class="comment"># USAGE: showrpm rpmfile1 rpmfile2 ...&lt;br /&gt;</span>
<span class="comment"># EXAMPLE: showrpm /cdrom/RedHat/RPMS/*.rpm&lt;br /&gt;</span>
<span class="keyword">for</span> rpmpackage <span class="keyword">in</span> $*; <span class="keyword">do</span>&lt;br /&gt;
　<span class="keyword">if</span> [ -r &amp;quot;<span class="variable">$rpmpackage</span>&amp;quot; ];<span class="keyword">then</span>&lt;br /&gt;
　　<span class="built_in">echo</span> &amp;quot;=============== <span class="variable">$rpmpackage</span> ==============&amp;quot;&lt;br /&gt;
　　rpm -qi -p <span class="variable">$rpmpackage</span>&lt;br /&gt;
　<span class="keyword">else</span>&lt;br /&gt;
　　<span class="built_in">echo</span> &amp;quot;ERROR: cannot <span class="built_in">read</span> file <span class="variable">$rpmpackage</span>&amp;quot;&lt;br /&gt;
　<span class="keyword">fi</span>&lt;br /&gt;
<span class="keyword">done</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这里出现了第二个特殊的变量$<em>，该变量包含了所有输入的命令行参数值。</em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">如果您运行showrpm openssh.rpm w3m.rpm webgrep.rpm</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">此时 $ 包含了 3 个字符串，即openssh.rpm, w3m.rpm and webgrep.rpm.</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">5. 引号</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在向程序传递任何参数之前，程序会扩展通配符和变量。这里所谓扩展的意思是程序会把通配符（比如*）替换成合适的文件名，它变量替换成变量值。为了防止程序作这种替换，您可以使用引号：让我们来看一个例子，假设在当前目录下有一些文件，两个jpg文件， mail.jpg 和tux.jpg。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="shebang">#!/bin/sh&lt;br /&gt;</span>
echo *.jpg
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将打印出&quot;mail.jpg tux.jpg&quot;的结果。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　引号 (单引号和双引号) 将防止这种通配符扩展：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="built_in">echo</span> &amp;quot;*.jpg&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> <span class="string">'*.jpg'</span>
</code></pre><p><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将打印&quot;*.jpg&quot; 两次。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　单引号更严格一些。它可以防止任何变量扩展。双引号可以防止通配符扩展但允许变量扩展。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="built_in">echo</span> <span class="variable">$SHELL</span>&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;<span class="variable">$SHELL</span>&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> <span class="string">'$SHELL'</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　运行结果为：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    /bin/bash<br><br>    /bin/bash<br><br>    $SHELL<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　最后，还有一种防止这种扩展的方法，那就是使用转义字符——反斜杠：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    echo *.jpg<br><br>    echo $SHELL<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将输出：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    *.jpg<br><br>    $SHELL<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">6. Here documents</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">当要将几行文字传递给一个命令时，here documents（译者注：目前还没有见到过对该词适合的翻译）一种不错的方法。对每个脚本写一段帮助性的文字是很有用的，此时如果我们四有那个 here documents就不必用echo函数一行行输出。 一个 &quot;Here document&quot; 以 &lt;&lt; 开头，后面接上一个字符串，这个字符串还必须出现在here document的末尾。下面是一个例子，在该例子中，我们对多个文件进行重命名，并且使用here documents打印帮助：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="comment"># we have less than 3 arguments. Print the help text:&lt;br /&gt;</span>
<span class="keyword">if</span> [ <span class="variable">$#</span> <span class="operator">-lt</span> <span class="number">3</span> ] ; <span class="keyword">then</span>&lt;br /&gt;
cat &amp;lt;&lt;br /&gt;
ren -- renames a number of files using sed regular expressions&lt;br /&gt;
USAGE: ren <span class="string">'regexp'</span> <span class="string">'replacement'</span> files...&lt;br /&gt;
EXAMPLE: rename all *.HTM files <span class="keyword">in</span> *.html:&lt;br /&gt;
　ren <span class="string">'HTM$'</span> <span class="string">'html'</span> *.HTM&lt;br /&gt;
HELP&lt;br /&gt;
　<span class="keyword">exit</span> <span class="number">0</span>&lt;br /&gt;
<span class="keyword">fi</span>&lt;br /&gt;
OLD=&amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
NEW=&amp;quot;<span class="variable">$2</span>&amp;quot;&lt;br /&gt;
<span class="comment"># The shift command removes one argument from the list of&lt;br /&gt;</span>
<span class="comment"># command line arguments.&lt;br /&gt;</span>
shift&lt;br /&gt;
shift&lt;br /&gt;
<span class="comment"># $* contains now all the files:&lt;br /&gt;</span>
<span class="keyword">for</span> file <span class="keyword">in</span> $*; <span class="keyword">do</span>&lt;br /&gt;
　　<span class="keyword">if</span> [ <span class="operator">-f</span> &amp;quot;<span class="variable">$file</span>&amp;quot; ] ; <span class="keyword">then</span>&lt;br /&gt;
　　　newfile=`<span class="built_in">echo</span> &amp;quot;<span class="variable">$file</span>&amp;quot; | sed &amp;quot;s/<span class="variable">${OLD}</span>/<span class="variable">${NEW}</span>/g&amp;quot;`&lt;br /&gt;
　　　<span class="keyword">if</span> [ <span class="operator">-f</span> &amp;quot;<span class="variable">$newfile</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　<span class="built_in">echo</span> &amp;quot;ERROR: <span class="variable">$newfile</span> exists already&amp;quot;&lt;br /&gt;
　　　<span class="keyword">else</span>&lt;br /&gt;
　　　　<span class="built_in">echo</span> &amp;quot;renaming <span class="variable">$file</span> to <span class="variable">$newfile</span> ...&amp;quot;&lt;br /&gt;
　　　　mv &amp;quot;<span class="variable">$file</span>&amp;quot; &amp;quot;<span class="variable">$newfile</span>&amp;quot;&lt;br /&gt;
　　　<span class="keyword">fi</span>&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
<span class="keyword">done</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　这是一个复杂一些的例子。让我们详细讨论一下。第一个if表达式判断输入命令行参数是否小于3个 (特殊变量$# 表示包含参数的个数) 。如果输入参数小于3个，则将帮助文字传递给cat命令，然后由cat命令将其打印在屏幕上。打印帮助文字后程序退出。如果输入参数等于或大于3个，我们就将第一个参数赋值给变量OLD，第二个参数赋值给变量NEW。下一步，我们使用shift命令将第一个和第二个参数从参数列表中删除，这样原来的第三个参数就成为参数列表$*的第一个参数。然后我们开始循环，命令行参数列表被一个接一个地被赋值给变量$file。接着我们判断该文件是否存在，如果存在则通过sed命令搜索和替换来产生新的文件名。然后将反短斜线内命令结果赋值给newfile。这样我们就达到了我们的目的：得到了旧文件名和新文件名。然后使用mv命令进行重命名。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4)函数</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">如果您写了一些稍微复杂一些的程序，您就会发现在程序中可能在几个地方使用了相同的代码，并且您也会发现，如果我们使用了函数，会方便很多。一个函数是这个样子的：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    functionname()<br><br>    {<br></div></p>
<pre><code># inside the <span class="keyword">body</span> $<span class="number">1</span> <span class="keyword">is</span> the first argument given <span class="keyword">to</span> the <span class="keyword">function</span>&lt;br /&gt;
# $<span class="number">2</span> the second ...&lt;br /&gt;
<span class="keyword">body</span>&lt;br /&gt;
}
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">您需要在每个程序的开始对函数进行声明。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　下面是一个叫做xtitlebar的脚本，使用这个脚本您可以改变终端窗口的名称。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这里使用了一个叫做help的函数。正如您可以看到的那样，这个定义的函数被使用了两次。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code>#!/bin/sh<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
# vim: set sw=4 ts=4 et:<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
help()<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
{<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
　　cat &amp;lt;<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
xtitlebar -- change the name of an xterm, gnome-terminal or kde konsole<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
USAGE: xtitlebar [-h] &amp;quot;string_for_titelbar&amp;quot;<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
OPTIONS: -h help text<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
EXAMPLE: xtitlebar &amp;quot;cvs&amp;quot;<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
HELP<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
　　exit 0<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
}<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
# in case of error or if -h is given we call the function help:<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
[ -z &amp;quot;$1&amp;quot; ] &amp;amp;&amp;amp; help<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
[ &amp;quot;$1&amp;quot; = &amp;quot;-h&amp;quot; ] &amp;amp;&amp;amp; help<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
# send the escape sequence to change the xterm titelbar:<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
echo -e &amp;quot;33]0;$107&amp;quot;<span class="tag">&lt;<span class="title">br</span> /&gt;</span>
#
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在脚本中提供帮助是一种很好的编程习惯，这样方便其他用户（和您）使用和理解脚本。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">命令行参数</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　我们已经见过$* 和 $1, $2 … $9 等特殊变量，这些特殊变量包含了用户从命令行输入的参数。迄今为止，我们仅仅了解了一些简单的命令行语法（比如一些强制性的参数和查看帮助的-h选项）。但是在编写更复杂的程序时，您可能会发现您需要更多的自定义的选项。通常的惯例是在所有可选的参数之前加一个减号，后面再加上参数值 (比如文件名)。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">有好多方法可以实现对输入参数的分析，但是下面的使用case表达式的例子无遗是一个不错的方法。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="built_in">help</span>()&lt;br /&gt;
{&lt;br /&gt;
　cat &amp;lt;&lt;br /&gt;
This is a generic command line parser demo.&lt;br /&gt;
USAGE EXAMPLE: cmdparser <span class="operator">-l</span> hello <span class="operator">-f</span> -- -somefile1 somefile2&lt;br /&gt;
HELP&lt;br /&gt;
　<span class="keyword">exit</span> <span class="number">0</span>&lt;br /&gt;
}&lt;br /&gt;
<span class="keyword">while</span> [ -n &amp;quot;<span class="variable">$1</span>&amp;quot; ]; <span class="keyword">do</span>&lt;br /&gt;
<span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span>&lt;br /&gt;
　　-h) <span class="built_in">help</span>;shift <span class="number">1</span>;; <span class="comment"># function help is called&lt;br /&gt;</span>
　　<span class="operator">-f</span>) opt_f=<span class="number">1</span>;shift <span class="number">1</span>;; <span class="comment"># variable opt_f is set&lt;br /&gt;</span>
　　<span class="operator">-l</span>) opt_l=<span class="variable">$2</span>;shift <span class="number">2</span>;; <span class="comment"># -l takes an argument -&amp;gt; shift by 2&lt;br /&gt;</span>
　　--) shift;<span class="keyword">break</span>;; <span class="comment"># end of options&lt;br /&gt;</span>
　　-*) <span class="built_in">echo</span> &amp;quot;error: no such option <span class="variable">$1</span>. -h <span class="keyword">for</span> <span class="built_in">help</span>&amp;quot;;<span class="keyword">exit</span> <span class="number">1</span>;;&lt;br /&gt;
　　*) <span class="keyword">break</span>;;&lt;br /&gt;
<span class="keyword">esac</span>&lt;br /&gt;
<span class="keyword">done</span>&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;opt_f is <span class="variable">$opt_f</span>&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;opt_l is <span class="variable">$opt_l</span>&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;first arg is <span class="variable">$1</span>&amp;quot;&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;<span class="number">2</span>nd arg is <span class="variable">$2</span>&amp;quot;
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　您可以这样运行该脚本：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cmdparser -l hello -f — -somefile1 somefile2<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　返回的结果是：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    opt_f is 1<br><br>    opt_l is hello<br><br>    first arg is -somefile1<br><br>    2nd arg is somefile2<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这个脚本是如何工作的呢？脚本首先在所有输入命令行参数中进行循环，将输入参数与case表达式进行比较，如果匹配则设置一个变量并且移除该参数。根据unix系统的惯例，首先输入的应该是包含减号的参数.</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">第2部分 实例</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">现在我们来讨论编写一个脚本的一般步骤。任何优秀的脚本都应该具有帮助和输入参数。并且写一个伪脚本（framework.sh），该脚本包含了大多数脚本都需要的框架结构，是一个非常不错的主意。这时候，在写一个新的脚本时我们只需要执行一下copy命令：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cp framework.sh myscript<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　然后再插入自己的函数。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　让我们再看两个例子：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">二进制到十进制的转换</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　脚本 b2d 将二进制数 (比如 1101) 转换为相应的十进制数。这也是一个用expr命令进行数学运算的例子：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="comment"># vim: set sw=4 ts=4 et:&lt;br /&gt;</span>
<span class="built_in">help</span>()&lt;br /&gt;
{&lt;br /&gt;
　cat &amp;lt;&lt;br /&gt;
b2h -- convert binary to decimal&lt;br /&gt;
USAGE: b2h [-h] binarynum&lt;br /&gt;
OPTIONS: -h <span class="built_in">help</span> text&lt;br /&gt;
EXAMPLE: b2h <span class="number">111010</span>&lt;br /&gt;
will <span class="keyword">return</span> <span class="number">58</span>&lt;br /&gt;
HELP&lt;br /&gt;
　<span class="keyword">exit</span> <span class="number">0</span>&lt;br /&gt;
}&lt;br /&gt;
error()&lt;br /&gt;
{&lt;br /&gt;
　　<span class="comment"># print an error and exit&lt;br /&gt;</span>
　　<span class="built_in">echo</span> &amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
　　<span class="keyword">exit</span> <span class="number">1</span>&lt;br /&gt;
}&lt;br /&gt;
lastchar()&lt;br /&gt;
{&lt;br /&gt;
　　<span class="comment"># return the last character of a string in $rval&lt;br /&gt;</span>
　　<span class="keyword">if</span> [ -z &amp;quot;<span class="variable">$1</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　<span class="comment"># empty string&lt;br /&gt;</span>
　　　　rval=&amp;quot;&amp;quot;&lt;br /&gt;
　　　　<span class="keyword">return</span>&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
　　<span class="comment"># wc puts some space behind the output this is why we need sed:&lt;br /&gt;</span>
　　numofchar=`<span class="built_in">echo</span> -n &amp;quot;<span class="variable">$1</span>&amp;quot; | wc -c | sed <span class="string">'s/ //g'</span> `&lt;br /&gt;
　　<span class="comment"># now cut out the last char&lt;br /&gt;</span>
　　rval=`<span class="built_in">echo</span> -n &amp;quot;<span class="variable">$1</span>&amp;quot; | cut -b <span class="variable">$numofchar</span>`&lt;br /&gt;
}&lt;br /&gt;
chop()&lt;br /&gt;
{&lt;br /&gt;
　　<span class="comment"># remove the last character in string and return it in $rval&lt;br /&gt;</span>
　　<span class="keyword">if</span> [ -z &amp;quot;<span class="variable">$1</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　<span class="comment"># empty string&lt;br /&gt;</span>
　　　　rval=&amp;quot;&amp;quot;&lt;br /&gt;
　　　　<span class="keyword">return</span>&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
　　<span class="comment"># wc puts some space behind the output this is why we need sed:&lt;br /&gt;</span>
　　numofchar=`<span class="built_in">echo</span> -n &amp;quot;<span class="variable">$1</span>&amp;quot; | wc -c | sed <span class="string">'s/ //g'</span> `&lt;br /&gt;
　　<span class="keyword">if</span> [ &amp;quot;<span class="variable">$numofchar</span>&amp;quot; = &amp;quot;<span class="number">1</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　<span class="comment"># only one char in string&lt;br /&gt;</span>
　　　　rval=&amp;quot;&amp;quot;&lt;br /&gt;
　　　　<span class="keyword">return</span>&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
　　numofcharminus1=`expr <span class="variable">$numofchar</span> &amp;quot;-&amp;quot; <span class="number">1</span>`&lt;br /&gt;
　　<span class="comment"># now cut all but the last char:&lt;br /&gt;</span>
　　rval=`<span class="built_in">echo</span> -n &amp;quot;<span class="variable">$1</span>&amp;quot; | cut -b <span class="number">0</span>-<span class="variable">${numofcharminus1}</span>`&lt;br /&gt;
}&lt;br /&gt;
<span class="keyword">while</span> [ -n &amp;quot;<span class="variable">$1</span>&amp;quot; ]; <span class="keyword">do</span>&lt;br /&gt;
<span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span>&lt;br /&gt;
　　-h) <span class="built_in">help</span>;shift <span class="number">1</span>;; <span class="comment"># function help is called&lt;br /&gt;</span>
　　--) shift;<span class="keyword">break</span>;; <span class="comment"># end of options&lt;br /&gt;</span>
　　-*) error &amp;quot;error: no such option <span class="variable">$1</span>. -h <span class="keyword">for</span> <span class="built_in">help</span>&amp;quot;;;&lt;br /&gt;
　　*) <span class="keyword">break</span>;;&lt;br /&gt;
<span class="keyword">esac</span>&lt;br /&gt;
<span class="keyword">done</span>&lt;br /&gt;
<span class="comment"># The main program&lt;br /&gt;</span>
sum=<span class="number">0</span>&lt;br /&gt;
weight=<span class="number">1</span>&lt;br /&gt;
<span class="comment"># one arg must be given:&lt;br /&gt;</span>
[ -z &amp;quot;<span class="variable">$1</span>&amp;quot; ] &amp;amp;&amp;amp; <span class="built_in">help</span>&lt;br /&gt;
binnum=&amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
binnumorig=&amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
<span class="keyword">while</span> [ -n &amp;quot;<span class="variable">$binnum</span>&amp;quot; ]; <span class="keyword">do</span>&lt;br /&gt;
　　lastchar &amp;quot;<span class="variable">$binnum</span>&amp;quot;&lt;br /&gt;
　　<span class="keyword">if</span> [ &amp;quot;<span class="variable">$rval</span>&amp;quot; = &amp;quot;<span class="number">1</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　sum=`expr &amp;quot;<span class="variable">$weight</span>&amp;quot; &amp;quot;+&amp;quot; &amp;quot;<span class="variable">$sum</span>&amp;quot;`&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
　　<span class="comment"># remove the last position in $binnum&lt;br /&gt;</span>
　　chop &amp;quot;<span class="variable">$binnum</span>&amp;quot;&lt;br /&gt;
　　binnum=&amp;quot;<span class="variable">$rval</span>&amp;quot;&lt;br /&gt;
　　weight=`expr &amp;quot;<span class="variable">$weight</span>&amp;quot; &amp;quot;*&amp;quot; <span class="number">2</span>`&lt;br /&gt;
<span class="keyword">done</span>&lt;br /&gt;
<span class="built_in">echo</span> &amp;quot;binary <span class="variable">$binnumorig</span> is decimal <span class="variable">$sum</span>&amp;quot;
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　该脚本使用的算法是利用十进制和二进制数权值 (1,2,4,8,16,..)，比如二进制&quot;10&quot;可以这样转换成十进制：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">0 <em> 1 + 1 </em> 2 = 2</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　为了得到单个的二进制数我们是用了lastchar 函数。该函数使用wc –c计算字符个数，然后使用cut命令取出末尾一个字符。Chop函数的功能则是移除最后一个字符。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">文件循环程序</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　或许您是想将所有发出的邮件保存到一个文件中的人们中的一员，但是在过了几个月以后，这个文件可能会变得很大以至于使对该文件的访问速度变慢。下面的脚本rotatefile可以解决这个问题。这个脚本可以重命名邮件保存文件（假设为outmail）为outmail.1，而对于outmail.1就变成了outmail.2 等等等等…</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#!/bin/sh&lt;br /&gt;</span>
<span class="comment"># vim: set sw=4 ts=4 et:&lt;br /&gt;</span>
ver=&amp;quot;<span class="number">0.1</span>&amp;quot;&lt;br /&gt;
<span class="built_in">help</span>()&lt;br /&gt;
{&lt;br /&gt;
　　cat &amp;lt;&lt;br /&gt;
rotatefile -- rotate the file name&lt;br /&gt;
USAGE: rotatefile [-h] filename&lt;br /&gt;
OPTIONS: -h <span class="built_in">help</span> text&lt;br /&gt;
EXAMPLE: rotatefile out&lt;br /&gt;
This will e.g rename out.<span class="number">2</span> to out.<span class="number">3</span>, out.<span class="number">1</span> to out.<span class="number">2</span>, out to out.<span class="number">1</span>&lt;br /&gt;
and create an empty out-file&lt;br /&gt;
The max number is <span class="number">10</span>&lt;br /&gt;
version <span class="variable">$ver</span>&lt;br /&gt;
HELP&lt;br /&gt;
　　<span class="keyword">exit</span> <span class="number">0</span>&lt;br /&gt;
}&lt;br /&gt;
error()&lt;br /&gt;
{&lt;br /&gt;
　　<span class="built_in">echo</span> &amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
　　<span class="keyword">exit</span> <span class="number">1</span>&lt;br /&gt;
}&lt;br /&gt;
<span class="keyword">while</span> [ -n &amp;quot;<span class="variable">$1</span>&amp;quot; ]; <span class="keyword">do</span>&lt;br /&gt;
<span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span>&lt;br /&gt;
　　-h) <span class="built_in">help</span>;shift <span class="number">1</span>;;&lt;br /&gt;
　　--) <span class="keyword">break</span>;;&lt;br /&gt;
　　-*) <span class="built_in">echo</span> &amp;quot;error: no such option <span class="variable">$1</span>. -h <span class="keyword">for</span> <span class="built_in">help</span>&amp;quot;;<span class="keyword">exit</span> <span class="number">1</span>;;&lt;br /&gt;
　　*) <span class="keyword">break</span>;;&lt;br /&gt;
<span class="keyword">esac</span>&lt;br /&gt;
<span class="keyword">done</span>&lt;br /&gt;
<span class="comment"># input check:&lt;br /&gt;</span>
<span class="keyword">if</span> [ -z &amp;quot;<span class="variable">$1</span>&amp;quot; ] ; <span class="keyword">then</span>&lt;br /&gt;
error &amp;quot;ERROR: you must specify a file, use -h <span class="keyword">for</span> <span class="built_in">help</span>&amp;quot;&lt;br /&gt;
<span class="keyword">fi</span>&lt;br /&gt;
filen=&amp;quot;<span class="variable">$1</span>&amp;quot;&lt;br /&gt;
<span class="comment"># rename any .1 , .2 etc file:&lt;br /&gt;</span>
<span class="keyword">for</span> n <span class="keyword">in</span> <span class="number">9</span> <span class="number">8</span> <span class="number">7</span> <span class="number">6</span> <span class="number">5</span> <span class="number">4</span> <span class="number">3</span> <span class="number">2</span> <span class="number">1</span>; <span class="keyword">do</span>&lt;br /&gt;
　　<span class="keyword">if</span> [ <span class="operator">-f</span> &amp;quot;<span class="variable">$filen</span>.<span class="variable">$n</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　　　p=`expr <span class="variable">$n</span> + <span class="number">1</span>`&lt;br /&gt;
　　　　<span class="built_in">echo</span> &amp;quot;mv <span class="variable">$filen</span>.<span class="variable">$n</span> <span class="variable">$filen</span>.<span class="variable">$p</span>&amp;quot;&lt;br /&gt;
　　　　mv <span class="variable">$filen</span>.<span class="variable">$n</span> <span class="variable">$filen</span>.<span class="variable">$p</span>&lt;br /&gt;
　　<span class="keyword">fi</span>&lt;br /&gt;
<span class="keyword">done</span>&lt;br /&gt;
<span class="comment"># rename the original file:&lt;br /&gt;</span>
<span class="keyword">if</span> [ <span class="operator">-f</span> &amp;quot;<span class="variable">$filen</span>&amp;quot; ]; <span class="keyword">then</span>&lt;br /&gt;
　　<span class="built_in">echo</span> &amp;quot;mv <span class="variable">$filen</span> <span class="variable">$filen</span>.<span class="number">1</span>&amp;quot;&lt;br /&gt;
　　mv <span class="variable">$filen</span> <span class="variable">$filen</span>.<span class="number">1</span>&lt;br /&gt;
<span class="keyword">fi</span>&lt;br /&gt;
<span class="built_in">echo</span> touch <span class="variable">$filen</span>&lt;br /&gt;
touch <span class="variable">$filen</span>
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这个脚本是如何工作的呢？在检测用户提供了一个文件名以后，我们进行一个9到1的循环。文件9被命名为10，文件8重命名为9等等。循环完成之后，我们将原始文件命名为文件1同时建立一个与原始文件同名的空文件。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">调试</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　最简单的调试命令当然是使用</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo命令</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">。您可以使用echo在任何怀疑出错的地方打印任何变量值。这也是绝大多数的shell程序员要花费80%的时间来调试程序的原因。Shell程序的好处在于不需要重新编译，插入一个echo命令也不需要多少时间。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　shell也有一个真实的调试模式。如果在脚本&quot;strangescript&quot; 中有错误，您可以这样来进行调试：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    sh -x strangescript<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将执行该脚本并显示所有变量的值。</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　shell还有一个不需要执行脚本只是检查语法的模式。可以这样使用：</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    sh -n your_script<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">　　这将返回所有语法错误</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">—————————————————————————————————————————————————</span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">shell编程简介</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Bourne Shell</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">介绍：Bourne Shell 基础及其他很多有用的特性，shell编程及组织。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">主要内容： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.shell基础 基本介绍，环境，选项，特殊字符 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.shell变量 用户定义变量，环境变量，位置变量(shell 参数) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.shell script编程 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">条件测试，循环及重复控制 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.shell定制 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1.shell基础知识</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">作者：Stephen Bourne 在Bell实验室开发 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">建议：man sh 查看相关UNIX上的改进或特性 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(1)shell提示符及其环境</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">/etc/passwd文件 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">提示符：$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    /etc/profile $HOME/.profile<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(2)shell执行选项</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-n 测试shell script语法结构，只读取shell script但不执行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-x 进入跟踪方式，显示所执行的每一条命令，用于调度 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-a Tag all variables for export </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-c &quot;string&quot; 从strings中读取命令 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-e 非交互方式 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-f 关闭shell文件名产生功能 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-h locate and remember functions as defind </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-i 交互方式 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-k 从环境变量中读取命令的参数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-r 限制方式 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-s 从标准输入读取命令 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-t 执行命令后退出(shell exits) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-u 在替换中如使用未定义变量为错误 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-v verbose,显示shell输入行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这些选项可以联合使用，但有些显然相互冲突，如-e和-i. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(3)受限制shell(Restircted Shell) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    sh -r 或 /bin/rsh<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">不能执行如下操作：cd, 更改PATH,指定全路径名，输出重定向，因此可以提供一个较好的控制和安全机制。通常rsh用于应用型用户及拨号用户，这些用户通常是看不到提示符的。通常受限制用户的主目录是不可写的。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">不足：如果用户可以调用sh,则rsh的限制将不在起作用，事实上如果用户在vi及more 程序中调用shell,而这时rsh的限制将不再起作用。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(4)用set改变 shell选项</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">用户可以在$提示符下用set命令来设置或取消shell的选项。使用-设置选项，+取消相应选项，大多数UNIX系统允许a,e,f,h,k,n,u,v和x的开关设置/取消。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    set -xv<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">启动跟踪方式;显示所有的命令及替换，同样显示输入。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    set -tu<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">关闭在替换时对未定义变量的检查。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用echo $-显示所有已设置的shell选项。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(5)用户启动文件 .profile</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    PATH=$PATH:/usr/loacl/bin; export PATH<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(6)shell环境变量</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    CDPATH 用于cd命令的查找路径 <br><br>    HOME /etc/passwd文件中列出的用户主目录 <br><br>    IFS Internal Field Separator,默认为空格，tab及换行符 <br><br>    MAIL /var/mail/$USERNAME mail等程序使用 <br><br>    PATH <br><br>    PS1，PS2 默认提示符($)及换行提示符(&gt;) <br><br>    TERM 终端类型，常用的有vt100,ansi,vt200,xterm等<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">示例：</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></span></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $PS1=&quot;test:&quot;;export PS1 <br><br>    test: PS1=&quot;\$&quot;;export PS1 <br><br>    $echo $MAIL <br><br>    /var/mail/username<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(7)保留字符及其含义</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ shell变量名的开始，如$var </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">| 管道，将标准输出转到下一个命令的标准输入 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># 注释开始 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&amp; 在后台执行一个进程 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">？ 匹配一个字符 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><em> 匹配0到多个字符(与DOS不同，可在文件名中间使用，并且含.) </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$- 使用set及执行时传递给shell的标志位 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$! 最后一个子进程的进程号 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$# 传递给shell script的参数个数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ 传递给shell script的参数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$@ 所有参数，个别的用双引号括起来 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$? 上一个命令的返回代码 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$0 当前shell的名字 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$n (n:1-) 位置参数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$$ 进程标识号(Process Identifier Number, PID) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt;file 输出重定向 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><code>command</code> 命令替换，如 filename=<code>basename /usr/local/bin/tcsh</code> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt;&gt;fiile 输出重定向，append </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">转义符及单引号： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $echo &quot;$HOME $PATH&quot; <br><br>    /home/hbwork /opt/kde/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin: <br><br>    $echo ‘$HOME $PATH’ <br><br>    $HOME $PATH <br><br>    $echo \$HOME $PATH <br><br>    $HOME /opt/kde/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/home/hbwork/bin<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">其他： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $dir=ls <br><br>    $$dir <br><br>    $alias dir ls <br><br>    $dir <br><br>    ls &gt; filelist <br><br>    ls &gt;&gt; filelist <br><br>    wc -l &lt; filelist <br><br>    wc -l filelist <br><br>    sleep 5; echo 5 seconds reaches; ls -l <br><br>    ps ax |egrep inetd <br><br>    find / -name core -exec rm {} \; &amp; <br><br>    filename=<code>date &amp;quot;+%Y%m%d&amp;quot;</code>.log<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2. shell变量</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">变量：代表某些值的符号，如$HOME,cd命令查找$HOME,在计算机语言中可以使用变量可以进行多种运算和控制。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Bourne Shell有如下四种变量： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.用户自定义变量 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.位置变量即 shell script之参数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.预定义变量（特殊变量） </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.环境变量(参考shell定制部分) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(1)用户自定义变量（数据的存储）</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ COUNT=1 <br><br>    $ NAME=&quot;He Binwu&quot;<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">技巧：因为大部分UNIX命令使用小写字符，因此在shell编程中通常使用全大写变量，当然这并不是强制性的，但使用大写字符可以在编程中方便地识别变量。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">变量的调用：在变量前加$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ echo $HOME <br><br>    /home/hbwork <br><br>    $ WEEK=Satur <br><br>    $ echo Today is $WEEKday <br><br>    Today is <br><br>    $echo Today is ${WEEK}day <br><br>    Today is Saturday<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Shell变量赋值从右从左进行(Linux Shell/bash从左向右赋值!) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ X=$Y Y=y <br><br>    $ echo $X <br><br>    y <br><br>    $ Z=z Y=$Z <br><br>    $ echo $Y <br><br>    $<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用unset命令删除变量的赋值 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ Z=hello <br><br>    $ echo $Z <br><br>    hello <br><br>    $ unset Z <br><br>    $ echo $Z <br><br>    $<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">有条件的命令替换</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在Bourne Shell中可以使变量替换在特定条件下执行，即有条件的环境变量替换。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这种变量替换总是用大括号括起来的。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.设置变量的默认值 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在变量未赋值之前其值为空。Bourne Shell允许对变量设置默认值，其格式如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    ${variable:-defaultvalue}<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ echo Hello $UNAME <br><br>    Hello <br><br>    $ echo Hello ${UNAME:-there} <br><br>    Hello there <br><br>    $ echo $UNAME #变量值并未发生变化 <br><br>    $ UNAME=hbwork <br><br>    $ echo Hello ${UNAME:-there} <br><br>    Hello hbwork <br><br>    $<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.另一种情况：改变变量的值，格式如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    ${variable:=value}<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ echo Hello $UNAME <br><br>    Hello <br><br>    $ echo Hello ${UNAME:=there} <br><br>    Hello there <br><br>    $ echo $UNAME #变量值并未发生变化 <br><br>    there <br><br>    $<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.变量替换中使用命令替换 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $USERDIR=${$MYDIR:-<code>pwd</code>}<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.在变量已赋值时进行替换 </span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></span></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    ${variable:+value}<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.带有错误检查的有条件变量替换 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    ${variable:?value}<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ UNAME= <br><br>    $ echo ${UNAME:?&quot;UNAME has not been set&quot;} <br><br>    UNAME: UNAME has not been set <br><br>    $ echo ${UNAME:?} <br><br>    UNAME: parameter null or not set<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(2)位置变量(Shell参数) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在shell script中位置参数可用$1..$9表示，$0表示内容通常为当前执行程序的文件名。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.防止变量值被替换 readonly variable </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.使用export命令输出变量，使得变量对子shell可用，当shell执行一下程序时，shell将为其设置一个新的环境让其执行，这称之了subshell. 在Bourne Shell中变量通常被认为是本地变量，也就是说在对其赋值之外的shell环境之外是不认识此变量的。使用export对subshell可用。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例：对变量PS1的export操作，shell的提示符将发生变化。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ PS1=<code>hostname</code>$ <br><br>    peony$sh <br><br>    $ echo $PS1 <br><br>    $ &lt;-输出结果 <br><br>    $ exit <br><br>    peony$export PS1 <br><br>    peony$sh <br><br>    peony$ echo $PS1 <br><br>    peony$ &lt;-输出结果 <br><br>    peony$<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3.Shell Script编程</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">目的：使用UNIX所提供的最常用工具来完成所需复杂任务的强大功能。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(1)最简单的Shell 编程</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ls -R / |grep myname |more<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">每天数据的备份： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ cd /usr/yourname; ls * |cpio -o &gt; /dev/rmt/0h<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">书写程序的目的是一次编程，多次使用（执行）！ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ cat &gt; backup.sh <br><br>    cd /home/hbwork <br><br>    ls * | cpio -o &gt; /dev/rmt/0h <br><br>    ^D<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">执行： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ sh backup.sh<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">或： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ chmod +x backup.sh <br><br>    $ ./backup.sh<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">技巧：在shell script中加入必要的注释，以便以后阅读及维护。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(2)shell是一个（编程）语言</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">同传统的编程语言一样，shell提供了很多特性，这些特性可以使你的shell script 编程更为有用，如：数据变量、参数传递、判断、流程控制、数据输入和输出，子程序及以中断处理等。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. 在shell编程中使用数据变量可以将程序变量更为通用，如在上面backup.sh中： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cd $WORKDIR <br><br>    ls * | cpio -o &gt; /dev/rmt/0h<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. Shell编程中的注释以#开头 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. 对shell变量进行数字运算，使用expr命令 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    expr integer operator integer<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">其中operator为+ - <em> / %, 但对</em>的使用要用转义符\,如： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $expr 4 * 5 <br><br>    20 <br><br>    $int=<code>expr 5 + 7</code> <br><br>    $echo $int <br><br>    12<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(3)Shell编程的参数传递, 可通过命令行参数以及交互式输入变量(read)</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">restoreall.sh 对backup.sh程序的备份磁带进行恢复 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $cat &gt; restoreall.sh <br><br>    cd $WORKDIR <br><br>    cpio -i &lt; /dev/rmt/0h <br><br>    ^D<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">restore1.sh:只能恢复一个文件 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="variable">#restore1</span> <span class="subst">--</span>program <span class="keyword">to</span> restore a single file <span class="subst">&lt;</span>br <span class="subst">/</span><span class="subst">&gt;</span>
cd <span class="variable">$WORKDIR</span> <span class="subst">&lt;</span>br <span class="subst">/</span><span class="subst">&gt;</span>
cpio <span class="attribute">-i</span> <span class="variable">$i</span> <span class="subst">&amp;</span><span class="literal">lt</span>; /dev/rmt/<span class="number">0</span>h <span class="subst">&lt;</span>br <span class="subst">/</span><span class="subst">&gt;</span>
<span class="variable">$restore1</span> file1 
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">恢复多个文件restoreany : </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#restoreany --program to restore a single file &lt;br /&gt;</span>
cd <span class="variable">$WORKDIR</span> &lt;br /&gt;
cpio -i <span class="variable">$*</span> &amp;lt; <span class="regexp">/dev/rmt</span><span class="regexp">/0h &lt;br /</span>&gt;
<span class="variable">$ </span>restoreany file1 file2 file3 
</code></pre><p><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(4)条件判断</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. if-then语句,格式如下: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    if command_1 <br><br>    then <br><br>    command_2 <br><br>    command_3 <br><br>    fi <br><br>    command_4<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在if-then语句中使用了命令返回码$?,即当command_1执行成功时才执行command_2和 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command_3,而command_4总是执行. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">示例程序unload: 在备份成功时删除原始文件,带有错误检查 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    cd $1 <br></div></p>
<pre><code><span class="comment">#备份时未考虑不成功的情况! &lt;br /&gt;</span>
ls -a | cpio -o &amp;gt; <span class="regexp">/dev/rmt</span><span class="regexp">/0h &lt;br /</span>&gt;
rm -rf *
</code></pre><p><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">改进如下: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"></div></p>
<pre><code><span class="comment">#当使用了管道命令时,管理命令的返回代码为最后一个命令的返回代码 &lt;br /&gt;</span>
<span class="keyword">if</span> ls <span class="operator">-a</span> | cpio -o &amp;gt; /dev/rmt/<span class="number">0</span>h &lt;br /&gt;
<span class="keyword">then</span> &lt;br /&gt;
rm -rf * &lt;br /&gt;
<span class="keyword">fi</span>
</code></pre><p><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. if-then-else语句 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    if command_1 <br><br>    then <br><br>    command_2 <br><br>    else <br><br>    command_3 <br><br>    fi<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">技巧: 由于shell对命令中的多余的空格不作任何处理,一个好的程序员会用这一特性对自己的程序采用统一的缩进格式,以增强自己程序的可读性. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. 使用test命令进行进行条件测试 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">格式: test conditions </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">test在以下四种情况下使用: a. 字符比较 b.两个整数值的比较 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">c. 文件操作,如文件是否存在及文件的状态等 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">d. 逻辑操作,可以进行and/or,与其他条件联合使用 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">a. 测试字符数据: shell变量通常民政部下均作为字符变量 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">str1 = str2 二者相长,相同 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">str1 != str2 不同 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-n string string不为空(长度不为零) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-z string string为空 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">string string不为空 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ str1=abcd #在含有空格时必须用引号括起来 <br><br>    $ test $str1=abcd <br><br>    $ echo $? <br><br>    0 <br><br>    $ str1=&quot;abcd &quot; <br><br>    $ test $str1=abcd <br><br>    $ echo $? <br><br>    1<br></div><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Note: 在test处理含有空格的变量时最好用引号将变量括起来,否则会出现错误的结果, </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">因为shell在处理命令行时将会去掉多余的空格,而用引号括起来则可以防止 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">shell去掉这些空格. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"></p>
<p><div class="code_main" style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left; color:rgb(102,102,102); padding-top:4px; padding-right:4px; padding-bottom:4px; padding-left:4px; margin-top:2px; margin-right:2px; margin-bottom:2px; margin-left:2px; border-top-width:1px; border-right-width:1px; border-bottom-width:1px; border-left-width:1px; border-top-style:dashed; border-right-style:dashed; border-bottom-style:dashed; border-left-style:dashed; border-top-color:rgb(102,102,102); border-right-color:rgb(102,102,102); border-bottom-color:rgb(102,102,102); border-left-color:rgb(102,102,102)"><br>    $ str1=&quot; &quot; <br><br>    $ test $str1 <br><br>    $ echo $? <br><br>    1 <br><br>    $ test &quot;$str1&quot; <br><br>    $ echo $? <br><br>    0 <br><br>    $ test -n $str1 <br><br>    test: argument expected <br><br>    $ test -n &quot;$str1&quot; <br><br>    $ echo $? <br><br>    0 <br><br>    $<br></div><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">b. 整数测试: test与expr相同,可以将字符型变量转换为整数进行操作,expr进行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">整数的算术运算,而test则进行逻辑运算. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">表达式 说明 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">———————————————————- </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -eq int2 相等? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -ne int2 不等? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -gt int2 int1 &gt; int2 ? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -ge int2 int1 &gt;= int2 ? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -lt int2 int1 &lt; int2 ? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int1 -le int2 int1 &lt;= int2 ? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ int1=1234 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ int2=01234 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ test $int1 -eq $int2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">0 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">c. 文件测试:检查文件状态如存在及读写权限等 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-r filename 用户对文件filename有读权限? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-w filename 用户对文件filename有写权限? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-x filename 用户对文件filename有可执行权限? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-f filename 文件filename为普通文件? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-d filename 文件filename为目录? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-c filename 文件filename为字符设备文件? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-b filename 文件filename为块设备文件? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-s filename 文件filename大小不为零? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-t fnumb 与文件描述符fnumb(默认值为1)相关的设备是一个终端设备? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">d. 测试条件之否定,使用! </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ cat /dev/null &gt; empty </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ test -r empty </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">0 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ test -s empty </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ test ! -s empty </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">0 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">e. 测试条件之逻辑运算 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-a And </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-o Or </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: $ test -r empty -a -s empty </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">f. 进行test测试的标准方法 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">因为test命令在 shell编程中占有很重要的地位,为了使shell能同其他编程语言一样 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">便于阅读和组织, Bourne Shell在使用test测试时使用了另一种方法:用方括号将整个 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">test测试括起来: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ int1=4 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ [ $int1 -gt 2 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $? </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">0 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例: 重写unload程序,使用test测试 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#!/bin/sh </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#unload - program to backup and remove files </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#syntax: unload directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#check arguments </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $# -ne 1 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;usage: $0 directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#check for valid directory name </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ ! -d &quot;$1&quot; ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;$1 is not a directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cd $1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">ls -a | cpio -o &gt; /dev/rmt/0h </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $? -eq 0 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">rm -rf <em> </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;A problem has occured in creating backup&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;The directory will not be ereased&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;Please check the backup device&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># end of unload </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在如上示例中出现了exit, exit有两个作用:一是停止程序中其他命令的执行,二是 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">设置程序的退出状态 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">g. if嵌套及elif结构 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">改进:使用elif结构 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">elif command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">elif command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">elif结构同if结构类似,但结构更清淅,其执行结果完全相同. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">h.交互式从键盘读入数据 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用read语句，其格式如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read var1 var2 … varn </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read将不作变量替换，但会删除多余的空格，直到遇到第一个换行符（回车）， </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">并将输入值依次赋值给相应的变量。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ read var1 var2 var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello my friends </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $var1 $var2 $var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello my friends </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $var1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ read var1 var2 var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello my dear friends </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">dear friends &lt;-输入多余变量时，输入值余下的内容赋给最后一个变量 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ read var1 var2 var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello friends </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $var3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;- var3为空 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在shell script中可使用read语句进行交互操作： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">… </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#echo -n message 输出结果后不换行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo -n &quot;Do you want to continue: Y or N&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read ANSWER </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $ANSWER=N -o $ANSWER=n ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">i. case结构：结构较elif-then结构更清楚 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">比较if-then语句： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ variable1 = value1 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">elif [ variable1 = value2 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">elif [ variable1 = value3 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">相应的case结构： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case value in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">pattern1) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">pattern2) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">… </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">patternn) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> case语句只执行第一个匹配模式 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例：使用case语句建立一个菜单选择shell script </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Display a menu </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo <em> </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;1 Restore&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;2 Backup&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;3 Unload&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Read and excute the user’s selection </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo -n &quot;Enter Choice:&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read CHOICE </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case &quot;$CHOICE&quot; in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1) echo &quot;Restore&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2) echo &quot;Backup&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3) echo &quot;Unload&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><em>) echo &quot;Sorry $CHOICE is not a valid choice </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在上例中，指默认匹配动作。此外，case模式中也可以使用逻辑操作，如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">pattern1 | pattern2 ) command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command ;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这样可以将上面示例程序中允许用户输入数字或每一个大写字母。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case &quot;$CHOICE&quot; in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1|R) echo &quot;Restore&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2|B) echo &quot;Backup&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3|U) echo &quot;Unload&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><em>) echo &quot;Sorry $CHOICE is not a valid choice </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(5)循环控制 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;1&gt; while循环: </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">格式： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">… </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： 计算1到5的平方 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#!/bin/sh </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Filename: square.sh </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">int=1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while [ $int -le 5 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">sq=`expr $int \ $int<code>&lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo $sq &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;int=</code>expr $int + 1<code>&lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;Job completed&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ sh square.sh &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;1 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;4 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;9 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;16 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;25 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;Job completed &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;&amp;lt;2&amp;gt; until循环结构： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;格式： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;until command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;.... &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;示例：使用until结构计算1-5的平方 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;#!/bin/sh &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;int=1 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;until [ $int -gt 5 ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;sq=</code>expr $int * $int<code>&lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo $sq &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;int=</code>expr $int + 1<code>&lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;Job completed&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;&amp;lt;3&amp;gt; 使用shift对不定长的参数进行处理 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;在以上的示例中我们总是假设命令行参数唯一或其个数固定，或者使用$*将整个命令 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;行参数传递给shell script进行处理。对于参数个数不固定并且希望对每个命令参数 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;进行单独处理时则需要shift命令。使用shift可以将命令行位置参数依次移动位置， &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;即$2-&amp;gt;$1, $3-&amp;gt;$2. 在移位之前的第一个位置参数$1在移位后将不在存在。 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;示例如下： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;#!/bin/sh &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;# &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;#Filename: shifter &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;until [ $# -eq 0 ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;Argument is $1 and</code>expr $# - 1<code>argument(s) remain&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;shift &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ shifter 1 2 3 4 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;Argument is 1 and 3 argument(s) remain &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;Argument is 2 and 2 argument(s) remain &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;Argument is 3 and 1 argument(s) remain &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;Argument is 4 and 0 argument(s) remain &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;使用shift时，每进行一次移位，$#减1，使用这一特性可以用until循环对每个参 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;数进行处理，如下示例中是一个求整数和的shell script: &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;#!/bin/sh &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;# sumints - a program to sum a series of integers &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;# &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;if [ $# -eq 0 ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;then &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;Usage: sumints integer list&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;exit 1 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;fi &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;sum=0 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;until [ $# -eq 0 ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;sum=</code>expr $sum + $1<code>&lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;shift &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo $sum &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ sh sumints 324 34 34 12 34 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;438 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;使用shift的另一个原因是Bourne Shell的位置参数变量为$1~$9, 因此通过位置变量 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;只能访问前9个参数。但这并不等于在命令行上最多只能输入9个参数。此时如果想访问 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;前9个参数之后的参数，就必须使用shift. &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;另外shift后可加整数进行一次多个移位，如： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;shift 3 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;&amp;lt;4&amp;gt;. for循环 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;格式： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;for var in arg1 arg2 ... argn &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;.... &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;command &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;示例： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ for letter in a b c d e; do echo $letter;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;a &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;b &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;c &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;d &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;e &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;对当前目录下的所有文件操作： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;$ for i in * &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;if [ -f $i ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;then &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;$i is a file&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;elif [ -d $i ] &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;echo &amp;quot;$i is a directory&amp;quot; &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;fi &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;done &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;求命令行上所有整数之和： &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;#!/bin/sh &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;sum=0 &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;for INT in $* &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;do &lt;/span&gt;&lt;br style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot; /&gt;
&lt;span style=&quot;font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left&quot;&gt;sum=</code>expr $sum + $INT` </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo $sum </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;6&gt; 从循环中退出： break和continue命令 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">break 立即退出循环 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">continue 忽略本循环中的其他命令，继续下一下循环 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在shell编程中有时我们要用到进行无限循环的技巧，也就是说这种循环一直执行碰 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">到break或continue命令。这种无限循环通常是使用true或false命令开始的。UNIX </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">系统中的true总是返加0值，而false则返回非零值。如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#一直执行到程序执行了break或用户强行中断时才结束循环 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while true </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">…. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">上面所示的循环也可以使用until false, 如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">until false </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">…. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在如下shell script中同时使用了continue,break以及case语句中的正规表达式用法： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#!/bin/sh </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Interactive program to restore, backup, or unload </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># a directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;Welcome to the menu driven Archive program&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while true </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Display a Menu </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;Make a Choice from the Menu below&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo  </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;1 Restore Archive&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;2 Backup directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;3 Unload directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;4 Quit&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Read the user’s selection </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo -n &quot;Enter Choice: &quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read CHOICE </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case $CHOICE in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[1-3] ) echo </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Read and validate the name of the directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo -n &quot;What directory do you want? &quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read WORKDIR </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ ! -d &quot;$WORKDIR&quot; ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;Sorry, $WORKDIR is not a directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">continue </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Make the directory the current working directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cd $WORKDIR;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4) :;; # :为空语句，不执行任何动作 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><em>) echo &quot;Sorry, $CHOICE is not a valid choice&quot; </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">continue </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case &quot;$CHOICE&quot; in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">1) echo &quot;Restoring…&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cpio -i </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2) echo &quot;Archiving…&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">ls | cpio -o &gt;/dev/rmt/0h;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">3) echo &quot;Unloading…&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">ls | cpio -o &gt;/dev/rmt/0h;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4) echo &quot;Quitting&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">break;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Check for cpio errors </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $? -ne 0 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;A problem has occurred during the process&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $CHOICE = 3 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;The directory will not be erased&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;Please check the device and try again&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">continue </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $CHOICE = 3 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">rm  </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(6)结构化编程：定义函数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">同其他高级语言一样，shell也提供了函数功能。函数通常也称之为子过程(subroutine), </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">其定义格式如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">funcname() </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">… </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command; #分号 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">定义函数之后，可以在shell中对此函数进行调用，使用函数定义可以将一个复杂的程序分 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">为多个可管理的程序段，如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># start program </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">setup () </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ command list ; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do_data () </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ command list ; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cleanup () </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ command list ; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">errors () </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ command list ; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">setup </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do_data </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cleanup </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># end program </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">技巧： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. 在对函数命名时最好能使用有含义的名字，即函数名能够比较准确的描述函数所完成 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">的任务。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">. 为了程序的维护方便，请尽可能使用注释 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用函数的另一个好处就是可以在一个程序中的不同地方执行相同的命令序列(函数), </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">iscontinue() </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while true </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo -n &quot;Continue?(Y/N)&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">read ANSWER </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case $ANSWER in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[Yy]) return 0;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">[Nn]) return 1;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><em>) echo &quot;Answer Y or N&quot;;; </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">这样可以在shell编程中调用iscontinue确定是否继续执行： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if iscontinue </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">continue </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">break </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">** shell函数与shell程序非常相似，但二者有一个非常重要的差别：shell程序是由子shell </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">执行的，而shell函数则是作为当前shell的一部分被执行的，因此在当前shell中可以改 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">变函数的定义。此外在任意shell(包括交互式的shell)中均可定义函数，如： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ dir </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">dir: not found </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ dir () { ls -l ;} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ dir </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">total 5875 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 100 Nov 10 23:16 doc </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 2973806 Nov 10 23:47 ns40docs.zip </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1715011 Nov 10 23:30 ns840usr.pdf </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1273409 Sep 23 1998 radsol21b6.tar.Z </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 7526 Nov 10 23:47 wget-log </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1748 Nov 13 21:51 wget-log.1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ unset dir </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ dir () { </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt; echo &quot;Permission Link Owner Group File_SZ LastAccess FileName&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt; echo &quot;—————————————————————————————-&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt; ls -l $; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&gt; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ dir </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Permission Link Owner Group File_SZ LastAccess FileName </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">—————————————————————————————- </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">total 5875 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 100 Nov 10 23:16 doc </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 2973806 Nov 10 23:47 ns40docs.zip </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1715011 Nov 10 23:30 ns840usr.pdf </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1273409 Sep 23 1998 radsol21b6.tar.Z </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 7526 Nov 10 23:47 wget-log </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">-rw-r—r— 1 hbwork 1748 Nov 13 21:51 wget-log.1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">通常情况下，shell script是在子shell中执行的，困此在此子shell中对变量所作的 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">修改对父shell不起作用。点(.) 命令使用shell在不创建子shell而由当前shell读取 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">并执行一个shell script, 可以通过这种方式来定义函数及变量。此外点(.)命令最 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">常用的功能就是通过读取.profile来重新配置初始化login变量。如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ . .profile </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(csh相对于.命令的是source命令). </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(7)使用And/Or结构进行有条件的命令执行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;1&gt; And , 仅当第一个命令成功时才有执行后一个命令,如同在逻辑与表达式中如果前面的 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">结果为真时才有必要继续运算，否则结果肯定为假。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">格式如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command1 &amp;&amp; command2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例：rm $TEMPDIR/<em> &amp;&amp; echo &quot;File successfully removed&quot; </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">等价于 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if rm $TEMPDIR/ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;File successfully removed&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;2&gt;Or, 与AND相反，仅当前一个命令执行出错时才执行后一条命令 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">例： rm $TEMPDIR/<em> || echo &quot;File not removed&quot; </em></span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">等价与： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if rm $TEMPDIR/ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;File not removed&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">&lt;3&gt; 混合命令条件执行 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command1 &amp;&amp; command2 &amp;&amp; command3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">当command1, command2成功时才执行command3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command1 &amp;&amp; command2 || comamnd3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">仅当command1成功，command2失败时才执行command3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">当然可以根据自己的需要进行多种条件命令的组合，在此不多讲述。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(8) 使用getopts命令读取unix格式选项 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">UNIX格式选项指如下格式的命令行参数： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">command -options parameters </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用格式： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">getopts option_string variable </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">具体使用方法请参考getopts的在线文档(man getopts). </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">示例如下： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#newdate </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $# -lt 1 ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">date </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">else </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while getopts mdyDHMSTjJwahr OPTION </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case $OPTION </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">m) date ‘+%m ‘;; # Month of Year </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">d) date ‘+%d ‘;; # Day of Month </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">y) date ‘+%y ‘;; # Year </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">D) date ‘+%D ‘;; # MM/DD/YY </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">H) date ‘+%H ‘;; # Hour </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">M) date ‘+%M ‘;; # Minute </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">S) date ‘+%S ‘;; # Second </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">T) date ‘+%T ‘;; # HH:MM:SS </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">j) date ‘+%j ‘;; # day of year </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">J) date ‘+%y%j ‘;;# 5 digit Julian date </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">w) date ‘+%w ‘;; # Day of the Week </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">a) date ‘+%a ‘;; # Day abbreviation </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">h) date ‘+%h ‘;; # Month abbreviation </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">r) date ‘+%r ‘;; # AM-PM time </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">\?) echo &quot;Invalid option $OPTION&quot;;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ newdate -J </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">94031 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ newdate -a -h -d </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Mon </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Jan </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">31 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ newdate -ahd </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Mon </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Jan </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">31 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">示例程序：复制程序 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># Syntax: duplicate [-c integer] [-v] filename </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># where integer is the number of duplicate copies </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"># and -v is the verbose option </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">COPIES=1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">VERBOSE=N </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while getopts vc: OPTION </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">case $OPTION </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">in </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">c) COPIES=$OPTARG;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">v) VERBOSE=Y;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">\?) echo &quot;Illegal Option&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1;; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">esac </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ $OPTIND -gt $# ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;No file name specified&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">shift <code>expr $OPTIND -1</code> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">FILE=$1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">COPY=0 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">while [ $COPIES -gt $COPY ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">do </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">COPY=<code>expr $COPY + 1</code> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cp $FILE ${FILE}${COPY} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ VERBOSE = Y ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo ${FILE}${COPY} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">done </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ duplicate -v fileA </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fileA1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ duplicate -c 3 -v fileB </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fileB1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fileB2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fileB3 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4. Shell的定制 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">通常使用shell的定制来控制用户自己的环境，比如改变shell的外观(提示符)以及增强 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">自己的命令。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(1)通常环境变量来定制shell </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">通常改变环境变量可以定制shell的工作环境。shell在处理信息时会参考这些环境变量 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">，改变环境变量的值在一定程度上改变shell的操作方式，比如改变命令行提示符。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">.使用IFS增加命令行分隔符 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">默认状态下shell的分隔符为空格、制表符及换行符，但可以通过改变IFS的值加入自己 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">的分隔符。如下所示： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ IFS=&quot;:&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo:Hello:my:Friend </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">Hello my Friend </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(2)加入自己的命令及函数 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">如下程序： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Directory and Prompt change program </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Syntax: chdir directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ ! -d &quot;$1&quot; ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;$1 is not a directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cd $1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">PS1=<code>pwd</code>$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">export PS1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ chdir /usr/home/teresa </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">但此程序在执行时系统提示符并不会改变，因为此程序是在子shell中执行的。因此其变量 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">对当前shell并无影响，要想对当前shell起作用，最好是将此作为函数写在自己的.profile中 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">或建立自己的个人函数文件.persfuncs </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Personal function file persfuncs </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">chdir() </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">{ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Directory and Prompt change program </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">#Syntax: chdir directory </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">if [ ! -d &quot;$1&quot; ] </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">then </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">echo &quot;$1 is not a directory&quot; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">exit 1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">fi </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">cd $1 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">PS1=<code>pwd</code>$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">export PS1; </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">} </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">再执行： </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ . .persfuncs </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ chdir temp </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">/home/hbbwork/temp$ </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">也可在自己的.profile文件中用 . .persfuncs调用.persfuncs. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">说明：在bash/tcsh中已经使用别名，相对而言别名比此方法更为方便。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">5. 有关shell的专门讨论 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(1)shell程序的调试 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">切记：程序员（人）总是会犯错误的，而计算机是不会错的。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">使用-x进行跟踪执行，执行并显示每一条指令。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">(2)命令组 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">用小括号将一组命令括起来，则这些命令会由子shell来完成；而{command_list;}则在当 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">前shell中执行。这两者的主要区别在于其对shell变量的影响，子shell执行的命令不会 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">影响当前shell中的变量。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ NUMBER=2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ (A=2;B=2;NUMBER=<code>expr $A + $B</code>; echo $NUMBER) </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $NUMBER </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">2 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ { A=2;B=2;NUMBER=<code>expr $A + $B</code>; echo $NUMBER; } </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">$ echo $NUMBER </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">4 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">总结：</span><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"> </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">在本章中讲述了Bourne Shell的基本知识,使用shell变量，shell script基础。这些概念对于理解学习Korn Shell, csh以及其他script编程都是非常有用的。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">很多OS都有不少语言及一些script功能，但很少有象UNIX SHELL这样灵活强大的script脚本语言能力。 </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">对于系统管理员或程序员来说，熟练地使用shell script将对日常工作(系统维护及管理) 非常有用，如果你想作一个合格的系统管理员，强烈建议你进一步深入的了解和使用shell. </span><br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left"><br><span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25px; text-align:left">另外，对于系统管理员来说，PERL也是一个必不可少的script编程语言，尤其是对于处理文本格式的各种文件，PERL具有shell, awk, sed, grep等的功能，但使用起来更为灵活，功能也更强大。大家可以参考“Perl By Examples&quot;来学习和使用PERL</span></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/21/unix-shell/" data-id="1qxnod3mc4gzz9ul" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tcl/">Tcl</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/feeling/">feeling</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01">January 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/07/16/why-we-droped-our-dream/">我们为何渐渐放弃了自己的梦想</a>
          </li>
        
          <li>
            <a href="/2014/07/16/canvas/">Canvas API</a>
          </li>
        
          <li>
            <a href="/2014/07/16/basic-network/">网络入门</a>
          </li>
        
          <li>
            <a href="/2014/07/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/07/16/using-nodejs-webkit/">Using nodejs to develop desktop app</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Tony Wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>