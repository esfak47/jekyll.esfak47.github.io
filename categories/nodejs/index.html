<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Category: nodejs | null</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title">
<meta property="og:url" content="http://yoursite.com/categories/nodejs/">
<meta property="og:site_name">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title">
<meta name="twitter:description">

  
    <link rel="alternative" href="/atom.xml" title="null" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">null</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-using-nodejs-webkit" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/16/using-nodejs-webkit/" class="article-date">
  <time datetime="2014-07-15T22:31:00.000Z" itemprop="datePublished">Jul 16 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nodejs/">nodejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/07/16/using-nodejs-webkit/">Using nodejs to develop desktop app</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="目录">目录</h1>
<h3 id="一、node-webkit是什么？">一、node-webkit是什么？</h3>
<h3 id="二、node-webkit有些什么干货？">二、node-webkit有些什么干货？</h3>
<h3 id="三、node-webkit的基本工作原理是怎样的？">三、node-webkit的基本工作原理是怎样的？</h3>
<h3 id="四、怎样用node-webkit进行客户端开发？">四、怎样用node-webkit进行客户端开发？</h3>
<h3 id="五、如何做到开发一份代码，生成多平台APP？">五、如何做到开发一份代码，生成多平台APP？</h3>
<h3 id="六、使用node-webkit开发桌面客户端的优缺点？">六、使用node-webkit开发桌面客户端的优缺点？</h3>
<h3 id="七、Q_&amp;_A!">七、Q &amp; A!</h3>
<h3 id="一、node-webkit是什么？-1">一、node-webkit是什么？</h3>
<h4 id="1、概念">1、概念</h4>
<p>基于node.js和chromium的应用程序实时运行环境，可运行通过HTML(5)、CSS(3)、Javascript来编写的本地应用程序。node.js和webkit的结合体，webkit提供DOM操作，node.js提供本地化操作；且将二者的context完全整合，可在HTML代码中直接使用node.js的API。</p>
<h4 id="2、获取node-webkit">2、获取node-webkit</h4>
<p>官网：<a href="https://github.com/rogerwang/node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit</a></p>
<p>支持的平台：Windows 32bit，Linux 32/64bit，Mac 32bit(OS X 10.7+)</p>
<p>选择与平台相对应的版本，下载并安装即可。</p>
<h3 id="二、node-webkit有些什么干货？-1">二、node-webkit有些什么干货？</h3>
<p>官方提供的一些成品：<a href="https://github.com/rogerwang/node-webkit/wiki/List-of-apps-and-companies-using-node-webkit" target="_blank" rel="external">https://github.com/rogerwang/node-webkit/wiki/List-of-apps-and-companies-using-node-webkit</a></p>
<h3 id="三、node-webkit的基本工作原理是怎样的？-1">三、node-webkit的基本工作原理是怎样的？</h3>
<p>webkit提供DOM操作，包括HTML解析、CSS渲染、Javascript解释执行、DOM事件处理等。而node.js则提供一些本地化的操作、服务器端的处理等。二者的上下文完全融合，实现一个较为完美的本地应用环境。</p>
<h3 id="四、怎样用node-webkit进行客户端开发？-1">四、怎样用node-webkit进行客户端开发？</h3>
<h4 id="1、一个node-webkit项目的基本目录结构">1、一个node-webkit项目的基本目录结构</h4>
<p>上面这是一个简单nw应用的目录结构，如果nw应用中需要用到额外的node_module，可以在目录结构中增加一个node_modules的目录，以存放APP所需的node插件。</p>
<p>其实，一个最最简单的nw应用，只需要有mail.html和package.json文件即可，如下：</p>
<h4 id="2、认识package-json">2、认识package.json</h4>
<p>“Every app package should contain a manifest file named package.json, it will tell node-webkit how to open the app and control how the browser behaves. ”</p>
<p>package.json格式如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">    "main": "main.html",                              /* APP的主入口，文件名任意；必选 */</div><div class="line">    "name": "nw-demo",                                /* APP的名称，必须具备唯一性，且符合正常变量命名；必选 */</div><div class="line">    "description": "demo app of node-webkit",         /* APP的简单描述 */</div><div class="line">    "version": "0.1.0",                               /* APP的版本号 */</div><div class="line">    "keywords": [ "demo", "node-webkit" ],            /* APP的关键字，搜索APP时用到 */</div><div class="line">    "window": {                                       /* APP的窗口属性 */</div><div class="line">        "icon": "link.png",                           /* APP图标（windows下，状态栏上可见） */</div><div class="line">        "toolbar": true,                              /* 是否显示工具栏 */</div><div class="line">        "width": 800,                                 /* 窗口初始化大小 */</div><div class="line">        "height": 500,</div><div class="line">        "frame": true                                 /* 是否显示外窗体，如最大化、最小化、关闭按钮 */</div><div class="line">    },</div><div class="line">    "user-agent": "%name %ver %nwver %webkit_ver %osinfo" /* 可自定义APP的UA */</div><div class="line">}</div></pre></td></tr></table></figure>



<p>其中，main和name是必选字段，更多配置字段，可参考官方地址：<a href="https://github.com/rogerwang/node-webkit/wiki/Manifest-Format" target="_blank" rel="external">https://github.com/rogerwang/node-webkit/wiki/Manifest-Format</a></p>
<h4 id="3、主窗口mail-html的写法">3、主窗口mail.html的写法</h4>
<p>随意写，和普通的前端页面开发方式一样！</p>
<h4 id="4、最简单的HelloWorld">4、最简单的HelloWorld</h4>
<p>Create <code>index.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">    We are using node.js <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">document.write(process.version)</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>.</div><div class="line">  <span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>Create <code>package.json</code>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"nw-demo"</span></span>,</div><div class="line">  "<span class="attribute">main</span>": <span class="value"><span class="string">"index.html"</span></span></div><div class="line">}</div></pre></td></tr></table></figure>

<p>Compress <code>index.html</code> and <code>package.json</code> into a zip archive called <code>app.nw</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ zip app.nw index.html package.json</div></pre></td></tr></table></figure>

<p>This should create a structure like this:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">app<span class="preprocessor">.nw</span></div><div class="line">|-- package<span class="preprocessor">.json</span></div><div class="line">`-- index<span class="preprocessor">.html</span></div></pre></td></tr></table></figure>

<p>Download the prebuilt binary for your platform and use it to open the<br><code>app.nw</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./nw app.nw</div></pre></td></tr></table></figure>

<p>也许你会觉得这个界面特别熟悉，没错，它就是chromium！只是在node-webkit中，我们可以通过修改package.json配置，把工具栏和外框去掉，修改后的配置为：</p>
<p>去掉外框后的运行效果：</p>
<p>你一定会发现去掉toolbar和frame以后，窗口没法被拖动了，其实，可以通过下面这句css来实现窗口可拖动：</p>
<h3 id="五、如何做到开发一份代码，生成多平台APP？-1">五、如何做到开发一份代码，生成多平台APP？</h3>
<h4 id="1、nw包制作">1、nw包制作</h4>
<p>完成上面的操作，已经生成了一个名为hello-world.nw的文件，如果本机已经安装过node-webkit，双击该文件即可运行。但是，针对未安装过node-webkit的用户，还需要将此nw的运行环境也打包在一起，并生成通用可执行文件，Mac上<em>.app，Windows上</em>.exe。</p>
<h4 id="2、针对Mac_OS_X，*-app文件制作">2、针对Mac OS X，*.app文件制作</h4>
<p>a）、app.icns文件制作</p>
<p>为你的App制作特定图标，可准备一张1024*1024的png图片，利用icns-Tool工具生成app.icns图标文件。</p>
<p>b）、修改Info.plist文件</p>
<p>为你的App制作或修改特定的描述文件。</p>
<p>c）、打包*.app</p>
<p>从官网再次下载node-webkit的Mac版，命令行执行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mv hello-world.nw app.nw </div><div class="line">cp app.nw node-webkit.app/Contents/Resources/</div><div class="line">cp app.icns node-webkit.app/Contents/Resources/</div><div class="line">cp Info.plist node-webkit.app/Contents/</div><div class="line">mv node-webkit.app hello-wrold.app</div></pre></td></tr></table></figure><br>至此，Mac OS X版本的可执行程序hello-world.app制作完成。<br><br>一般情况下，都会将其压缩后再进行传播。<br><br>#### 3）、针对Windows，*.exe文件制作 ####<br><br>windows版本的exe程序制作非常容易，从官网下载node-webkit.exe，cmd下执行：<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">copy /b node-webkit<span class="preprocessor">.exe</span>+app<span class="preprocessor">.exe</span> hello-world<span class="preprocessor">.exe</span></div></pre></td></tr></table></figure><br>在Linux环境下，可以使用如下命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">cat node-webkit.exe app.exe &gt; hello-world.exe</div></pre></td></tr></table></figure><br>至此，Windows版本的hello-world.exe程序制作完成。<br><br><br><br>4）、将繁琐重复的操作整合到一个build.sh脚本中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="shebang">#! sh</span></div><div class="line">app_name=<span class="string">"system-info"</span></div><div class="line"><span class="comment"># 创建app.nw文件</span></div><div class="line"><span class="built_in">cd</span> ../ && rm -rf output && mkdir output cp</div><div class="line">rm -rf output</div><div class="line">-r <span class="variable">$app_name</span>/* output</div><div class="line">rm -rf output/Info.plist output/build.sh output/app.icns</div><div class="line"><span class="built_in">cd</span> output/</div><div class="line">find . -type d -name <span class="string">".svn"</span> | xargs rm -rf</div><div class="line">zip -r ../app.nw * &gt; /dev/null;</div><div class="line">rm -rf * && <span class="built_in">cd</span> ../ && mv app.nw output/</div><div class="line">mv output <span class="variable">$app_name</span>/ && <span class="built_in">cd</span> <span class="variable">$app_name</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"create nw file success!"</span></div><div class="line"></div><div class="line"><span class="comment">#下载基础包</span></div><div class="line">svn co svn://localhost/node-webkit-base output &gt; /dev/null</div><div class="line"></div><div class="line"><span class="comment">#创建mac版本app</span></div><div class="line"><span class="built_in">cd</span> output</div><div class="line">unzip mac-os-x.zip <span class="operator">-d</span> mac-os-x &gt; /dev/null</div><div class="line">rm -rf mac-os-x.zip mac-os-x/nwsnapshot</div><div class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ../Info.plist ];<span class="keyword">then</span></div><div class="line">cp ../Info.plist mac-os-x/node-webkit.app/Contents/</div><div class="line"><span class="keyword">fi</span></div><div class="line">cp app.nw mac-os-x/node-webkit.app/Contents/Resources/</div><div class="line"><span class="keyword">if</span> [ <span class="operator">-f</span> ../app.icns ];<span class="keyword">then</span></div><div class="line">cp ../app.icns mac-os-x/node-webkit.app/Contents/Resources/</div><div class="line"><span class="keyword">fi</span></div><div class="line">mv mac-os-x/node-webkit.app mac-os-x/<span class="variable">$app_name</span>.app</div><div class="line"><span class="built_in">echo</span> <span class="string">"create mac os app success!"</span></div><div class="line"></div><div class="line"><span class="comment">#创建windows版本app</span></div><div class="line">unzip win-<span class="number">32</span>.zip <span class="operator">-d</span> win-<span class="number">32</span> &gt; /dev/null</div><div class="line">rm -rf win-<span class="number">32</span>.zip win-<span class="number">32</span>/nwsnapshot</div><div class="line">cp app.nw win-<span class="number">32</span>/ && <span class="built_in">cd</span> win-<span class="number">32</span></div><div class="line">cat nw.exe app.nw &gt; <span class="variable">$app_name</span>.exe</div><div class="line">rm -rf nw.exe nwsnapshot.exe</div><div class="line"><span class="built_in">cd</span> ..</div><div class="line"><span class="built_in">echo</span> <span class="string">"create windows app success!"</span></div><div class="line"></div><div class="line"><span class="comment">#删除app.nw</span></div><div class="line">rm <span class="operator">-f</span> app.nw</div></pre></td></tr></table></figure>


<h3 id="六、使用node-webkit开发桌面客户端的优缺点？-1">六、使用node-webkit开发桌面客户端的优缺点？</h3>
<p>1、优点</p>
<ul>
<li>提高UI开发效率，DOM中丰富的事件等可以涵盖绝大多数桌面开发中的情况</li>
<li>HTML(5)与CSS(3)拥有丰富的展现效果，可以更容易地对界面进行改版、换肤</li>
<li>容易实现跨平台:Mac OS X 、Windows、Linux</li>
<li>使用Web开发人员工具可以使 UI 调试变得很轻松</li>
<li>桌面程序UI与Web版UI可以共享代码</li>
</ul>
<p>2）、缺点</p>
<ul>
<li>浏览器原生API几乎仅仅局限在Web页面上</li>
<li>若通过JavaScript引擎向Web前端暴露一些具有操作客户端权限的API，如何保证代码安全性</li>
<li>必须携带浏览器内核运行库，无形增加程序体积，至少20MB以上（压缩后）</li>
<li>能否满足各种复杂怪异的需求，比如异型窗口</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/07/16/using-nodejs-webkit/" data-id="nibkqvckgbzs1pvz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Tcl/">Tcl</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/feeling/">feeling</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nodejs/">nodejs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell/">shell</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">July 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01">January 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/07/16/why-we-droped-our-dream/">我们为何渐渐放弃了自己的梦想</a>
          </li>
        
          <li>
            <a href="/2014/07/16/canvas/">Canvas API</a>
          </li>
        
          <li>
            <a href="/2014/07/16/basic-network/">网络入门</a>
          </li>
        
          <li>
            <a href="/2014/07/16/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/07/16/using-nodejs-webkit/">Using nodejs to develop desktop app</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Tony Wang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>